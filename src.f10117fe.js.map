{"version":3,"sources":["node_modules/webfontloader/webfontloader.js","src/scripts/helpers.ts","node_modules/signals/dist/signals.js","src/classes/Point.ts","src/classes/Rectangle.ts","node_modules/canvas-dpi-scaler/canvas-dpi-scaler.js","src/classes/Canvas.ts","src/classes/Data.ts","src/classes/Label.ts","src/classes/Tooltip.ts","src/classes/Plot.ts","src/classes/Transformer.ts","src/classes/Ticks.ts","src/classes/Grid.ts","src/classes/Axis.ts","src/classes/BackGround.ts","src/classes/series/SeriesBase.ts","src/classes/series/SeriesXY.ts","src/classes/Chart.ts","node_modules/bezier-easing/src/index.js","src/configs/indices-chart-black.ts","src/configs/indices-chart-colored.ts","src/configs/indices-chart.ts","src/classes/Legend.ts","src/configs/square-chart.ts","src/configs/indices-article.ts","src/index.ts","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;4DCjBA;;AACA,SAAgB,qBAAhB,CAAsC,QAAtC,EAAsD;AAClD,SAAO,KAAK,CAAC,QAAD,CAAL,CAAgB,IAAhB,CAAqB,UAAC,QAAD,EAAS;AACjC,QAAI,WAAW,GAAG,QAAQ,CAAC,OAAT,CAAiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,QAAI,WAAW,KAAK,WAAW,CAAC,QAAZ,CAAqB,UAArB,KAAoC,WAAW,CAAC,QAAZ,CAAqB,0BAArB,CAAzC,CAAf,EAA2G;AACvG,aAAO,QAAQ,CAAC,EAAT,GAAc,QAAQ,CAAC,IAAT,EAAd,GAAgC,OAAO,CAAC,MAAR,CAAe,QAAQ,CAAC,MAAxB,CAAvC;AACH;;AACD,UAAM,IAAI,SAAJ,CAAc,2BAAd,CAAN;AACH,GANM,CAAP;AAOH;;AARD,OAAA,CAAA,qBAAA,GAAA,qBAAA,EAUA;AACA;;AACA,SAAgB,SAAhB,CAA0B,OAA1B,EAAmC,YAAnC,EAA+C;AAC3C,EAAA,YAAY,GAAG,YAAY,IAAI,GAA/B;AACA,MAAI,OAAO,GAAG,OAAO,CAAC,KAAR,CAAc,IAAd,CAAd;AAEA,MAAI,SAAS,GAAG,EAAhB;;AACA,OAAK,IAAI,CAAC,GAAG,OAAO,CAAC,CAAD,CAAP,CAAW,KAAX,CAAiB,YAAjB,EAA+B,MAA/B,GAAwC,CAArD,EAAwD,CAAC,IAAI,CAA7D,EAAgE,CAAC,EAAjE;AAAqE,IAAA,SAAS,CAAC,IAAV,CAAe,EAAf;AAArE;;AACA,OAAK,IAAI,CAAC,GAAG,CAAR,EAAW,CAAC,GAAG,OAAO,CAAC,MAA5B,EAAoC,CAAC,GAAG,CAAxC,EAA2C,CAAC,EAA5C,EAAgD;AAC5C,QAAI,OAAO,CAAC,CAAD,CAAP,CAAW,MAAf,EAAuB;AACnB,UAAI,GAAG,GAAG,OAAO,CAAC,CAAD,CAAP,CAAW,KAAX,CAAiB,YAAjB,CAAV,CADmB,CAEnB;;AACA,WAAK,IAAI,CAAC,GAAG,GAAG,CAAC,MAAJ,GAAa,CAA1B,EAA6B,CAAC,IAAI,CAAlC,EAAqC,CAAC,EAAtC;AAA0C,QAAA,SAAS,CAAC,CAAD,CAAT,CAAa,IAAb,CAAkB,GAAG,CAAC,CAAD,CAArB;AAA1C;AACH;AACJ;;AACD,SAAO,SAAP;AACH;;AAdD,OAAA,CAAA,SAAA,GAAA,SAAA;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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0E,KAAK,CAAC,CAAD,CAA/E,EAAoF,CAApF,EAAuF,IAAvF;AACH,KAFD;AAGH,GAxID;;AA2IJ,SAAA,KAAA;AAjWA,CAAA,EAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA;;ACbb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC3GA,IAAA,OAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AAGA,IAAI,MAAM,GAAa,EAAvB;AACA,IAAI,OAAO,GAAW,EAAtB;AACA,IAAI,UAAU,GAAa,EAA3B;AAEA,IAAI,aAAJ;AACA,IAAI,UAAJ;AACA,IAAM,IAAI,GAAW,IAArB;;AAEA,IAAM,MAAM,GAAG,OAAO,CAAC,eAAD,CAAtB;;AACA,IAAM,MAAM,GAAG,MAAM,CAAC,IAAD,EAAO,CAAP,EAAU,IAAV,EAAgB,CAAhB,CAArB,EAEA;;AACA,SAAgB,WAAhB,CAA4B,SAA5B,EAAuC,IAAvC,EAA2C;SAAA,CAEzC;;;AACA,EAAA,OAAA,CAAA,KAAA,GAAQ,IAAI,OAAA,CAAA,KAAJ,CAAU,SAAV,EAAqB,CAAC,CAAD,EAAI,GAAJ,CAArB,EAA+B,CAAC,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","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","// рукописная загрузка из CSV\r\nexport function customLoadDataFromCsv(filePath: string) {\r\n    return fetch(filePath).then((response) => {\r\n        var contentType = response.headers.get(\"content-type\");\r\n        if (contentType && (contentType.includes(\"text/csv\") || contentType.includes(\"application/octet-stream\"))) {\r\n            return response.ok ? response.text() : Promise.reject(response.status);\r\n        }\r\n        throw new TypeError(\"Oops, we haven't got CSV!\");\r\n    })\r\n}\r\n\r\n// csv to array\r\n// @ts-ignore\r\nexport function csvToCols(strData, strDelimiter) {\r\n    strDelimiter = strDelimiter || \",\";\r\n    let rowData = strData.split(\"\\n\");\r\n\r\n    let colResult = [];\r\n    for (let i = rowData[0].split(strDelimiter).length - 1; i >= 0; i--) colResult.push([]);\r\n    for (let i = 0, l = rowData.length; i < l; i++) {\r\n        if (rowData[i].length) {\r\n            let row = rowData[i].split(strDelimiter);\r\n            // @ts-ignore\r\n            for (let j = row.length - 1; j >= 0; j--) colResult[j].push(row[j]);\r\n        }\r\n    }\r\n    return colResult;\r\n}","/*jslint onevar:true, undef:true, newcap:true, regexp:true, bitwise:true, maxerr:50, indent:4, white:false, nomen:false, plusplus:false */\n/*global define:false, require:false, exports:false, module:false, signals:false */\n\n/** @license\n * JS Signals <http://millermedeiros.github.com/js-signals/>\n * Released under the MIT license\n * Author: Miller Medeiros\n * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)\n */\n\n(function(global){\n\n    // SignalBinding -------------------------------------------------\n    //================================================================\n\n    /**\n     * Object that represents a binding between a Signal and a listener function.\n     * <br />- <strong>This is an internal constructor and shouldn't be called by regular users.</strong>\n     * <br />- inspired by Joa Ebert AS3 SignalBinding and Robert Penner's Slot classes.\n     * @author Miller Medeiros\n     * @constructor\n     * @internal\n     * @name SignalBinding\n     * @param {Signal} signal Reference to Signal object that listener is currently bound to.\n     * @param {Function} listener Handler function bound to the signal.\n     * @param {boolean} isOnce If binding should be executed just once.\n     * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n     * @param {Number} [priority] The priority level of the event listener. (default = 0).\n     */\n    function SignalBinding(signal, listener, isOnce, listenerContext, priority) {\n\n        /**\n         * Handler function bound to the signal.\n         * @type Function\n         * @private\n         */\n        this._listener = listener;\n\n        /**\n         * If binding should be executed just once.\n         * @type boolean\n         * @private\n         */\n        this._isOnce = isOnce;\n\n        /**\n         * Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @memberOf SignalBinding.prototype\n         * @name context\n         * @type Object|undefined|null\n         */\n        this.context = listenerContext;\n\n        /**\n         * Reference to Signal object that listener is currently bound to.\n         * @type Signal\n         * @private\n         */\n        this._signal = signal;\n\n        /**\n         * Listener priority\n         * @type Number\n         * @private\n         */\n        this._priority = priority || 0;\n    }\n\n    SignalBinding.prototype = {\n\n        /**\n         * If binding is active and should be executed.\n         * @type boolean\n         */\n        active : true,\n\n        /**\n         * Default parameters passed to listener during `Signal.dispatch` and `SignalBinding.execute`. (curried parameters)\n         * @type Array|null\n         */\n        params : null,\n\n        /**\n         * Call listener passing arbitrary parameters.\n         * <p>If binding was added using `Signal.addOnce()` it will be automatically removed from signal dispatch queue, this method is used internally for the signal dispatch.</p>\n         * @param {Array} [paramsArr] Array of parameters that should be passed to the listener\n         * @return {*} Value returned by the listener.\n         */\n        execute : function (paramsArr) {\n            var handlerReturn, params;\n            if (this.active && !!this._listener) {\n                params = this.params? this.params.concat(paramsArr) : paramsArr;\n                handlerReturn = this._listener.apply(this.context, params);\n                if (this._isOnce) {\n                    this.detach();\n                }\n            }\n            return handlerReturn;\n        },\n\n        /**\n         * Detach binding from signal.\n         * - alias to: mySignal.remove(myBinding.getListener());\n         * @return {Function|null} Handler function bound to the signal or `null` if binding was previously detached.\n         */\n        detach : function () {\n            return this.isBound()? this._signal.remove(this._listener, this.context) : null;\n        },\n\n        /**\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\n         */\n        isBound : function () {\n            return (!!this._signal && !!this._listener);\n        },\n\n        /**\n         * @return {boolean} If SignalBinding will only be executed once.\n         */\n        isOnce : function () {\n            return this._isOnce;\n        },\n\n        /**\n         * @return {Function} Handler function bound to the signal.\n         */\n        getListener : function () {\n            return this._listener;\n        },\n\n        /**\n         * @return {Signal} Signal that listener is currently bound to.\n         */\n        getSignal : function () {\n            return this._signal;\n        },\n\n        /**\n         * Delete instance properties\n         * @private\n         */\n        _destroy : function () {\n            delete this._signal;\n            delete this._listener;\n            delete this.context;\n        },\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        toString : function () {\n            return '[SignalBinding isOnce:' + this._isOnce +', isBound:'+ this.isBound() +', active:' + this.active + ']';\n        }\n\n    };\n\n\n/*global SignalBinding:false*/\n\n    // Signal --------------------------------------------------------\n    //================================================================\n\n    function validateListener(listener, fnName) {\n        if (typeof listener !== 'function') {\n            throw new Error( 'listener is a required param of {fn}() and should be a Function.'.replace('{fn}', fnName) );\n        }\n    }\n\n    /**\n     * Custom event broadcaster\n     * <br />- inspired by Robert Penner's AS3 Signals.\n     * @name Signal\n     * @author Miller Medeiros\n     * @constructor\n     */\n    function Signal() {\n        /**\n         * @type Array.<SignalBinding>\n         * @private\n         */\n        this._bindings = [];\n        this._prevParams = null;\n\n        // enforce dispatch to aways work on same context (#47)\n        var self = this;\n        this.dispatch = function(){\n            Signal.prototype.dispatch.apply(self, arguments);\n        };\n    }\n\n    Signal.prototype = {\n\n        /**\n         * Signals Version Number\n         * @type String\n         * @const\n         */\n        VERSION : '1.0.0',\n\n        /**\n         * If Signal should keep record of previously dispatched parameters and\n         * automatically execute listener during `add()`/`addOnce()` if Signal was\n         * already dispatched before.\n         * @type boolean\n         */\n        memorize : false,\n\n        /**\n         * @type boolean\n         * @private\n         */\n        _shouldPropagate : true,\n\n        /**\n         * If Signal is active and should broadcast events.\n         * <p><strong>IMPORTANT:</strong> Setting this property during a dispatch will only affect the next dispatch, if you want to stop the propagation of a signal use `halt()` instead.</p>\n         * @type boolean\n         */\n        active : true,\n\n        /**\n         * @param {Function} listener\n         * @param {boolean} isOnce\n         * @param {Object} [listenerContext]\n         * @param {Number} [priority]\n         * @return {SignalBinding}\n         * @private\n         */\n        _registerListener : function (listener, isOnce, listenerContext, priority) {\n\n            var prevIndex = this._indexOfListener(listener, listenerContext),\n                binding;\n\n            if (prevIndex !== -1) {\n                binding = this._bindings[prevIndex];\n                if (binding.isOnce() !== isOnce) {\n                    throw new Error('You cannot add'+ (isOnce? '' : 'Once') +'() then add'+ (!isOnce? '' : 'Once') +'() the same listener without removing the relationship first.');\n                }\n            } else {\n                binding = new SignalBinding(this, listener, isOnce, listenerContext, priority);\n                this._addBinding(binding);\n            }\n\n            if(this.memorize && this._prevParams){\n                binding.execute(this._prevParams);\n            }\n\n            return binding;\n        },\n\n        /**\n         * @param {SignalBinding} binding\n         * @private\n         */\n        _addBinding : function (binding) {\n            //simplified insertion sort\n            var n = this._bindings.length;\n            do { --n; } while (this._bindings[n] && binding._priority <= this._bindings[n]._priority);\n            this._bindings.splice(n + 1, 0, binding);\n        },\n\n        /**\n         * @param {Function} listener\n         * @return {number}\n         * @private\n         */\n        _indexOfListener : function (listener, context) {\n            var n = this._bindings.length,\n                cur;\n            while (n--) {\n                cur = this._bindings[n];\n                if (cur._listener === listener && cur.context === context) {\n                    return n;\n                }\n            }\n            return -1;\n        },\n\n        /**\n         * Check if listener was attached to Signal.\n         * @param {Function} listener\n         * @param {Object} [context]\n         * @return {boolean} if Signal has the specified listener.\n         */\n        has : function (listener, context) {\n            return this._indexOfListener(listener, context) !== -1;\n        },\n\n        /**\n         * Add a listener to the signal.\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        add : function (listener, listenerContext, priority) {\n            validateListener(listener, 'add');\n            return this._registerListener(listener, false, listenerContext, priority);\n        },\n\n        /**\n         * Add listener to the signal that should be removed after first execution (will be executed only once).\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        addOnce : function (listener, listenerContext, priority) {\n            validateListener(listener, 'addOnce');\n            return this._registerListener(listener, true, listenerContext, priority);\n        },\n\n        /**\n         * Remove a single listener from the dispatch queue.\n         * @param {Function} listener Handler function that should be removed.\n         * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\n         * @return {Function} Listener handler function.\n         */\n        remove : function (listener, context) {\n            validateListener(listener, 'remove');\n\n            var i = this._indexOfListener(listener, context);\n            if (i !== -1) {\n                this._bindings[i]._destroy(); //no reason to a SignalBinding exist if it isn't attached to a signal\n                this._bindings.splice(i, 1);\n            }\n            return listener;\n        },\n\n        /**\n         * Remove all listeners from the Signal.\n         */\n        removeAll : function () {\n            var n = this._bindings.length;\n            while (n--) {\n                this._bindings[n]._destroy();\n            }\n            this._bindings.length = 0;\n        },\n\n        /**\n         * @return {number} Number of listeners attached to the Signal.\n         */\n        getNumListeners : function () {\n            return this._bindings.length;\n        },\n\n        /**\n         * Stop propagation of the event, blocking the dispatch to next listeners on the queue.\n         * <p><strong>IMPORTANT:</strong> should be called only during signal dispatch, calling it before/after dispatch won't affect signal broadcast.</p>\n         * @see Signal.prototype.disable\n         */\n        halt : function () {\n            this._shouldPropagate = false;\n        },\n\n        /**\n         * Dispatch/Broadcast Signal to all listeners added to the queue.\n         * @param {...*} [params] Parameters that should be passed to each handler.\n         */\n        dispatch : function (params) {\n            if (! this.active) {\n                return;\n            }\n\n            var paramsArr = Array.prototype.slice.call(arguments),\n                n = this._bindings.length,\n                bindings;\n\n            if (this.memorize) {\n                this._prevParams = paramsArr;\n            }\n\n            if (! n) {\n                //should come after memorize\n                return;\n            }\n\n            bindings = this._bindings.slice(); //clone array in case add/remove items during dispatch\n            this._shouldPropagate = true; //in case `halt` was called before dispatch or during the previous dispatch.\n\n            //execute all callbacks until end of the list or until a callback returns `false` or stops propagation\n            //reverse loop since listeners with higher priority will be added at the end of the list\n            do { n--; } while (bindings[n] && this._shouldPropagate && bindings[n].execute(paramsArr) !== false);\n        },\n\n        /**\n         * Forget memorized arguments.\n         * @see Signal.memorize\n         */\n        forget : function(){\n            this._prevParams = null;\n        },\n\n        /**\n         * Remove all bindings from signal and destroy any reference to external objects (destroy Signal object).\n         * <p><strong>IMPORTANT:</strong> calling any method on the signal instance after calling dispose will throw errors.</p>\n         */\n        dispose : function () {\n            this.removeAll();\n            delete this._bindings;\n            delete this._prevParams;\n        },\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        toString : function () {\n            return '[Signal active:'+ this.active +' numListeners:'+ this.getNumListeners() +']';\n        }\n\n    };\n\n\n    // Namespace -----------------------------------------------------\n    //================================================================\n\n    /**\n     * Signals namespace\n     * @namespace\n     * @name signals\n     */\n    var signals = Signal;\n\n    /**\n     * Custom event broadcaster\n     * @see Signal\n     */\n    // alias for backwards compatibility (see #gh-44)\n    signals.Signal = Signal;\n\n\n\n    //exports to multiple environments\n    if(typeof define === 'function' && define.amd){ //AMD\n        define(function () { return signals; });\n    } else if (typeof module !== 'undefined' && module.exports){ //node\n        module.exports = signals;\n    } else { //browser\n        //use string because of Google closure compiler ADVANCED_MODE\n        /*jslint sub:true */\n        global['signals'] = signals;\n    }\n\n}(this));\n","export class Point {\r\n    \r\n    x: number;\r\n    y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        //this.x = Math.round(x);\r\n        //this.y = Math.round(y);\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    findDist(next: Point): number {\r\n        const dist = Math.sqrt((this.x-next.x)*(this.x-next.x)+(this.y-next.y)*(this.y-next.y));\r\n        return dist;\r\n    }\r\n\r\n\r\n    findDistX(next: Point): number {\r\n        const dist = Math.abs(this.x-next.x);\r\n        return dist;\r\n    }\r\n\r\n}","export class Rectangle {\r\n    \r\n    x1: number;\r\n    y1: number;\r\n    x2: number;\r\n    y2: number;\r\n\r\n    constructor(x1: number, y1: number, x2: number, y2: number) {\r\n        this.x1 = x1;\r\n        this.y1 = y1;\r\n        this.x2 = x2;\r\n        this.y2 = y2;\r\n        this.updateCoords(x1, y1, x2, y2);\r\n    }\r\n\r\n    get width(): number {\r\n        return Math.abs(this.x1-this.x2)\r\n    }\r\n\r\n    get height(): number {\r\n        return Math.abs(this.y1-this.y2)\r\n    }\r\n\r\n    get zeroX(): number {\r\n        return this.x1\r\n    }\r\n\r\n    get zeroY(): number {\r\n        return this.y2\r\n    }\r\n\r\n    get midX(): number {\r\n        return this.x1 + Math.abs(this.x2 - this.x1)*0.5;\r\n    }\r\n\r\n    get midY(): number {\r\n        return this.y1 + Math.abs(this.y2 - this.y1)*0.5;\r\n    }\r\n\r\n    updateCoords(x1: number, y1: number, x2: number, y2: number) {\r\n        this.x1 = x1;\r\n        this.y1 = y1;\r\n        this.x2 = x2;\r\n        this.y2 = y2;\r\n    }\r\n\r\n// @ts-ignore\r\n    countDistBetweenRects(type: string, next: Rectangle) : number {\r\n        switch (type) {\r\n            case 'vertical':\r\n                return this.y1 - next.y2\r\n            break;\r\n\r\n            case 'horizontal':\r\n                return this.x1 - next.x2\r\n            break;\r\n        }\r\n        \r\n    }\r\n\r\n    move(dx: number, dy: number) {\r\n        this.x1 = this.x1 + dx;\r\n        this.y1 = this.y1 + dy;\r\n        this.x2 = this.x2 + dx;\r\n        this.y2 = this.y2 + dy;\r\n    }\r\n\r\n}\r\n","//\n//\n// Based on: http://www.html5rocks.com/en/tutorials/canvas/hidpi/\n\n//\nvar scaleFn = function(canvas, context, customWidth, customHeight) {\n  if(!canvas || !context) { throw new Error('Must pass in `canvas` and `context`.'); }\n\n  var width = customWidth ||\n              canvas.width || // attr, eg: <canvas width='400'>\n              canvas.clientWidth; // keep existing width\n  var height = customHeight ||\n               canvas.height ||\n               canvas.clientHeight;\n  var deviceRatio = window.devicePixelRatio || 1;\n  var bsRatio = context.webkitBackingStorePixelRatio ||\n                context.mozBackingStorePixelRatio ||\n                context.msBackingStorePixelRatio ||\n                context.oBackingStorePixelRatio ||\n                context.backingStorePixelRatio || 1;\n  var ratio = deviceRatio / bsRatio;\n\n  // Adjust canvas if ratio =/= 1\n  if (deviceRatio !== bsRatio) {\n    canvas.width = Math.round(width * ratio);\n    canvas.height = Math.round(height * ratio);\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n    context.scale(ratio, ratio);\n  }\n  return ratio;\n};\n\n// expose functionality\nif(typeof window !== 'undefined') { window.canvasDpiScaler = scaleFn; }\nmodule.exports = scaleFn;\n","import { Signal } from \"signals\"\r\nimport { Point } from \"./Point\";\r\nimport { Rectangle } from \"./Rectangle\";\r\n\r\nconst canvasDpiScaler = require('canvas-dpi-scaler');\r\n\r\nexport class Canvas {\r\n\r\n    container: HTMLElement;\r\n    canvas: HTMLCanvasElement;\r\n    _ctx: CanvasRenderingContext2D | null;\r\n    // @ts-ignore\r\n    height: number;\r\n    // @ts-ignore\r\n    width: number;\r\n    top: number;\r\n    right: number;\r\n    bottom: number;\r\n    left: number;\r\n    // @ts-ignore\r\n    mouseCoords: Point;\r\n    resized: Signal;\r\n    onPaddingsSetted: Signal;\r\n    mouseMoved: Signal;\r\n    mouseOuted: Signal;\r\n    touchEnded: Signal;\r\n    isSquare: boolean = false;\r\n    lineWidth: number = 1;\r\n    color: string = 'black'\r\n\r\n    constructor(container: HTMLElement, ...paddings: number[]) {\r\n        this.onPaddingsSetted = new Signal();\r\n        this.mouseMoved = new Signal();\r\n        this.mouseOuted = new Signal();\r\n        this.touchEnded = new Signal();\r\n\r\n        this.resized = new Signal();\r\n\r\n        this.container = container;\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.style.position = 'absolute';\r\n        this.top = 0;\r\n        this.right = 0;\r\n        this.bottom = 0;\r\n        this.left = 0;\r\n\r\n        this.container.appendChild(this.canvas);\r\n        this._ctx = this.canvas.getContext('2d');\r\n        \r\n        //bind\r\n        this.clear = this.clear.bind(this);\r\n\r\n        //listeners\r\n        window.addEventListener('resize', () => { this.resize() });\r\n\r\n        //call methods\r\n        this.setPaddings(...paddings);\r\n        this.resize();\r\n    }\r\n\r\n\r\n    turnOnListenres() {\r\n        this.canvas.addEventListener('mousemove', (event) => {\r\n            this.mouseCoords = this.getMouseCoords(event);\r\n            if (this.inDrawArea) {\r\n                this.mouseMoved.dispatch();\r\n            } else {\r\n                this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY);\r\n                this.mouseOuted.dispatch();\r\n            }\r\n          });\r\n\r\n        this.canvas.addEventListener('mouseleave', (event) => {\r\n            this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY);\r\n            this.mouseOuted.dispatch();\r\n        });\r\n\r\n        this.canvas.addEventListener('touchmove', (event) => {\r\n            this.mouseCoords = this.getTouchCoords(event);\r\n            if (this.inDrawArea) {\r\n                this.mouseMoved.dispatch();\r\n            } else {\r\n                this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY);\r\n                this.mouseOuted.dispatch();\r\n            }\r\n        });\r\n\r\n        this.canvas.addEventListener('touchend', (event) => {\r\n            this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY);\r\n            this.touchEnded.dispatch();\r\n        });\r\n\r\n        this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY); \r\n    }\r\n\r\n    addOnPage() {\r\n        this.container.appendChild(this.canvas);\r\n    }\r\n\r\n    get inDrawArea(): boolean {\r\n        if (this.mouseCoords.x < 0) return false;\r\n        if (this.mouseCoords.x > this.viewport.width) return false;\r\n        if (this.mouseCoords.y < 0) return false;\r\n        if (this.mouseCoords.y > this.viewport.height) return false;\r\n        return true;\r\n    }\r\n\r\n    setPaddings(...paddings: number[]) {\r\n        let fields = {};\r\n        const defaultPad: number = 50;\r\n\r\n        switch(paddings.length) {\r\n            case 0:\r\n                this.top = defaultPad;\r\n                this.right = defaultPad;\r\n                this.bottom = defaultPad;\r\n                this.left = defaultPad;\r\n            break;\r\n          \r\n            case 1:\r\n                this.top = paddings[0];\r\n                this.right = defaultPad;\r\n                this.bottom = defaultPad;\r\n                this.left = defaultPad;\r\n            break;\r\n          \r\n            case 2:\r\n                this.top = paddings[0];\r\n                this.right = paddings[1];\r\n                this.bottom = paddings[0];\r\n                this.left = paddings[1];\r\n            break;\r\n\r\n            case 3:\r\n                this.top = paddings[0];\r\n                this.right = paddings[1];\r\n                this.bottom = paddings[2];\r\n                this.left = defaultPad;\r\n            break;\r\n\r\n            case 4:\r\n                this.top = paddings[0];\r\n                this.right = paddings[1];\r\n                this.bottom = paddings[2];\r\n                this.left = paddings[3];\r\n            break;\r\n          }\r\n        \r\n        this.mouseCoords = new Point(this.viewport.x2, this.viewport.zeroY);\r\n        this.onPaddingsSetted.dispatch();\r\n        return \r\n    }\r\n\r\n\r\n    get ctx(): CanvasRenderingContext2D | null {\r\n        return this._ctx;\r\n    }\r\n\r\n    set squareRes(res: boolean) {\r\n        this.isSquare = res;\r\n        this.resize();\r\n    }\r\n\r\n    resize() {\r\n\r\n        if (this.isSquare) {\r\n            let w = this.container.getBoundingClientRect().width;\r\n            let h = this.container.getBoundingClientRect().height;\r\n            this.width = Math.min(w, h);\r\n            this.height = Math.min(w, h);\r\n        }\r\n        else {\r\n            this.width = this.container.getBoundingClientRect().width;\r\n            this.height = this.container.getBoundingClientRect().height;\r\n        }\r\n\r\n        this.canvas.width = this.width;\r\n        this.canvas.height = this.height;\r\n        this.canvas.style.width = this.width.toString() + 'px';\r\n        this.canvas.style.height = this.height.toString() + 'px';\r\n        canvasDpiScaler(this.canvas, this._ctx, this.width, this.height);\r\n\r\n        this.resized.dispatch();\r\n    }\r\n\r\n    clear() {\r\n        if (this._ctx) this._ctx.clearRect(0, 0, this.width, this.height);\r\n       \r\n    }\r\n\r\n    get viewport(): Rectangle {\r\n        return new Rectangle(this.left, this.top, this.width-this.right, this.height-this.bottom);\r\n    }\r\n\r\n    drawVp() {\r\n        const rect = this.viewport;\r\n        // @ts-ignore\r\n        this.ctx.rect(rect.x1, rect.y1, rect.width, rect.height);\r\n        \r\n        if (this.ctx) {\r\n            this.ctx.strokeStyle = this.color;\r\n            this.ctx.fillStyle = this.color;\r\n            this.ctx.lineWidth = this.lineWidth;\r\n        }\r\n\r\n        // @ts-ignore\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    // @ts-ignore\r\n    getMouseCoords(event): Point {\r\n        var bcr = this.canvas.getBoundingClientRect();\r\n        return new Point(event.clientX - bcr.left  - this.viewport.x1, event.clientY - bcr.top - this.viewport.y1);\r\n    }\r\n\r\n    // @ts-ignore\r\n    getTouchCoords(event): Point {\r\n        const clientX = event.touches[0].clientX;\r\n        const clientY = event.touches[0].clientY;\r\n        var bcr = this.canvas.getBoundingClientRect();\r\n        return new Point(clientX - bcr.left - this.viewport.x1, clientY - bcr.top - this.viewport.y1);\r\n    }\r\n\r\n    clipCanvas() {\r\n        const rect = this.viewport;\r\n        let squarePath = new Path2D();\r\n        squarePath.rect( rect.x1, rect.y1, rect.width, rect.height );\r\n        // @ts-ignore\r\n        this._ctx.clip(squarePath);\r\n    }\r\n\r\n  }\r\n","import { Series } from \"./Series\";\r\n\r\nexport class Data {\r\n\r\n    seriesStorage: Series[];\r\n    \r\n    constructor() {\r\n        this.seriesStorage = [];\r\n    }\r\n\r\n    findExtremes(type: string, from?: number, to?: number): number[] {\r\n        let maxArr: number[] = [];\r\n        let minArr: number[] = [];\r\n\r\n        \r\n        this.seriesStorage.forEach((series) => {\r\n            let dataRange:  number[][];\r\n            if ((from !== undefined) && (to !== undefined)) { \r\n                    dataRange = series.getDataRange(type, from, to) \r\n                } else { dataRange = series.seriesData }\r\n\r\n            const extremes = series.findExtremes(dataRange);\r\n            \r\n            switch (type) {\r\n                case 'ind':\r\n                    if (extremes[2] !== undefined) minArr.push(extremes[2]);\r\n                    if (extremes[3] !== undefined) maxArr.push(extremes[3]);\r\n                break;\r\n    \r\n                case 'val':\r\n                    if (extremes[0] !== undefined) minArr.push(extremes[0]);\r\n                    if (extremes[1] !== undefined) maxArr.push(extremes[1]);\r\n                break;\r\n            }\r\n        })\r\n\r\n        return [Math.min(...minArr), Math.max(...maxArr)];\r\n    }\r\n\r\n    findSeriesById(id: string):Series | null {\r\n        const series: Series[] = this.seriesStorage.filter((series) => {\r\n            return series.id === id\r\n        });\r\n        if (series.length !== 0) return series[0];\r\n        return null;\r\n    }\r\n\r\n    switchAllSeriesAnimation(hasAnimation: boolean, duration?: number) {\r\n        this.seriesStorage.forEach((series, ind) => {\r\n            series.hasAnimation = hasAnimation;\r\n            if (duration) series.animationDuration = duration;\r\n        })\r\n    }\r\n\r\n    changeAllSeriesAnimationTimeFunction(newTimeFunc:(time: number) => number) {\r\n        this.seriesStorage.forEach((series, ind) => {\r\n            series.timeFunc = newTimeFunc;\r\n        })\r\n    }\r\n\r\n/*\r\n    addSeries(id: string, ...seriesData: number[][]) {\r\n        const newSeries = new Series(id, ...seriesData);\r\n        this.storage.push(newSeries);\r\n        this.onSeriesAdded.dispatch();\r\n        newSeries.onDataReplaced.add(this.onDataReplaced.dispatch);\r\n        newSeries.onPlotDataChanged.add( this.onPlotDataAnimated.dispatch );\r\n        return newSeries;\r\n    }\r\n\r\n    removeSeries(id: string) {\r\n        const series: Series[] = this.storage.filter((series) => {\r\n            return series.id !== id\r\n        });\r\n        this.storage = series.slice();   \r\n    }\r\n\r\n*/\r\n\r\n  }","import { Point } from \"./Point\";\r\nimport { Signal } from \"signals\"\r\nimport { Rectangle } from \"./Rectangle\";\r\n\r\ninterface labelOutline {\r\n    width: number;\r\n    color: string;\r\n}\r\n\r\nexport class Label {\r\n    display: boolean = true;\r\n\r\n    color: string = 'black';\r\n    colorArr?: string[];\r\n    color_counter: number = 0;\r\n\r\n    fontFamily: string = 'serif'\r\n    fontSize: number = 16;\r\n    isScalebale: boolean = false;\r\n    fontTarget: number = 12;\r\n    fontBase: number = 1000;\r\n\r\n    position: string = 'bottom';\r\n    offset: number = 0;\r\n    units?: string;\r\n    rotationAngle: number = 0;\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n    isUpperCase: boolean = false;\r\n\r\n    hasOutline: boolean = false;\r\n    outlineOptions?: labelOutline;\r\n\r\n    onOptionsSetted: Signal;\r\n\r\n    constructor(type?: string) {\r\n\r\n        this.onOptionsSetted = new Signal();\r\n\r\n        switch (type) {\r\n            case 'vertical':\r\n                this.position = 'left';\r\n                break;\r\n\r\n            case 'horizontal':\r\n                this.position = 'bottom';\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    setOptions(display: boolean, color?: string, position?: string, offset?: number, fontOptions?: any[], colorArr?: string[]) {\r\n        this.color = color || 'black';\r\n        this.position = position || 'bottom';\r\n        this.offset = offset || 0;\r\n\r\n        this.display = display;\r\n\r\n        if (colorArr) {\r\n            this.colorArr = colorArr;\r\n            this.color_counter = 0;\r\n        }\r\n\r\n        if (fontOptions) {\r\n            this.fontFamily = fontOptions[1];\r\n            this.fontSize = +fontOptions[0];\r\n            if (fontOptions[2] !== undefined) {\r\n                this.isScalebale = fontOptions[2];\r\n            }\r\n            if (fontOptions[3] !== undefined) {\r\n                this.fontTarget = fontOptions[3];\r\n            }\r\n            if (fontOptions[4] !== undefined) {\r\n                this.fontBase = fontOptions[4];\r\n            }\r\n        }\r\n\r\n        this.onOptionsSetted.dispatch();\r\n        return this;\r\n    }\r\n\r\n    calculateFontSize(ctx: CanvasRenderingContext2D): string {\r\n        if (this.isScalebale) {\r\n            const size = this.getRowHeight(ctx);\r\n            const fontString = `${size}px ${this.fontFamily}`;\r\n            return fontString\r\n        } else {\r\n            const fontString = `${this.fontSize}px ${this.fontFamily}`;\r\n            return fontString\r\n        }  \r\n    }\r\n\r\n    getRowHeight(ctx: CanvasRenderingContext2D): number {\r\n        if (this.isScalebale) {\r\n            const canvasWidth = ctx.canvas.clientWidth;\r\n            const ratio = this.fontTarget / this.fontBase;   // calc ratio\r\n            let size = canvasWidth * ratio;\r\n            if (size > this.fontSize) {\r\n                size = this.fontSize;\r\n            }\r\n            return size\r\n        } else {\r\n            return this.fontSize\r\n        } \r\n    }\r\n\r\n    get font(){\r\n        let size = this.fontSize;\r\n        const fontString = `${this.fontSize}px ${this.fontFamily}`;\r\n        return fontString\r\n    }\r\n\r\n    setOutline(options: labelOutline) {\r\n        this.hasOutline = true;\r\n        this.outlineOptions = options;\r\n    }\r\n\r\n    setOffset(x: number, y: number) {\r\n        this.offsetX = x;\r\n        this.offsetY = y;\r\n        this.onOptionsSetted.dispatch();\r\n    }\r\n\r\n    addOffset(labelCoord: Point) {\r\n\r\n        if (this.offsetX && this.offsetY) {\r\n            labelCoord.y = labelCoord.y - this.offsetY;\r\n            labelCoord.x = labelCoord.x + this.offsetX;\r\n        } else\r\n\r\n            switch (this.position) {\r\n                case 'top':\r\n                    labelCoord.y = labelCoord.y - this.offset - this.fontSize * 0.5;\r\n                    break;\r\n\r\n                case 'bottom':\r\n                    labelCoord.y = labelCoord.y + this.offset + this.fontSize * 0.5;\r\n                    break;\r\n\r\n                case 'left':\r\n                    labelCoord.x = labelCoord.x - this.offset;\r\n                    break;\r\n\r\n                case 'right':\r\n                    labelCoord.x = labelCoord.x + this.offset;\r\n                    break;\r\n            }\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D, coord: Point, labeltext: string) {\r\n\r\n        if (this.colorArr) {\r\n            ctx.fillStyle = this.colorArr[this.color_counter];\r\n            this.color_counter = this.color_counter + 1;\r\n            if (this.color_counter == this.colorArr.length) this.color_counter = 0;\r\n        }\r\n\r\n        else {\r\n            ctx.fillStyle = this.color;\r\n        }\r\n\r\n        ctx.font = this.calculateFontSize(ctx);\r\n        //ctx.font = this.font;\r\n        ctx.textBaseline = 'middle';\r\n        \r\n        if ((this.isUpperCase) && (typeof labeltext == 'string')) {\r\n            labeltext = labeltext.toUpperCase();\r\n        }\r\n\r\n        const text = ctx.measureText(labeltext);\r\n        const labelCoord = new Point(coord.x - text.width * 0.5, coord.y);\r\n        this.addOffset(labelCoord);\r\n\r\n\r\n        let printText = labeltext;\r\n        if (this.units) printText = labeltext + this.units;\r\n\r\n        if (this.rotationAngle !== 0) {\r\n            ctx.save();\r\n            ctx.translate(labelCoord.x + text.width * 0.5, labelCoord.y + this.fontSize * 0.5);\r\n            ctx.rotate((Math.PI / 180) * this.rotationAngle);\r\n            ctx.translate(-labelCoord.x - text.width * 0.5, -labelCoord.y - this.fontSize * 0.5);\r\n            ctx.fillText(printText, labelCoord.x, labelCoord.y);\r\n\r\n            ctx.restore();\r\n        } else {\r\n\r\n            if (this.hasOutline) {\r\n                this.drawOutline(ctx, labelCoord, printText);\r\n            }\r\n\r\n            ctx.fillText(printText, labelCoord.x, labelCoord.y);\r\n        }\r\n\r\n    }\r\n\r\n    drawOutline(ctx: CanvasRenderingContext2D, coord: Point, text: string) {\r\n        \r\n        if (this.outlineOptions) {   \r\n            ctx.lineWidth = this.outlineOptions.width;     \r\n            ctx.strokeStyle = this.outlineOptions.color;\r\n            ctx.strokeText(text, coord.x, coord.y);\r\n        }\r\n\r\n    }\r\n\r\n    getlabelRect(ctx: CanvasRenderingContext2D, coord: Point, labeltext: string): Rectangle {\r\n        ctx.font = this.font;\r\n        const text = ctx.measureText(labeltext);\r\n\r\n        const labelCoord = new Point(coord.x - text.width * 0.5, coord.y);\r\n        this.addOffset(labelCoord);\r\n        let textYgap = 0;\r\n\r\n        if (this.font.indexOf('Transcript Pro') !== -1) {\r\n            textYgap = 2;\r\n        }\r\n\r\n        const labelRect = new Rectangle(labelCoord.x, labelCoord.y - this.fontSize * 0.5, labelCoord.x + text.width, labelCoord.y + this.fontSize * 0.5 - textYgap);\r\n        return labelRect;\r\n    }\r\n\r\n\r\n}","import { Rectangle } from \"./Rectangle\";\r\nimport { Point } from \"./Point\";\r\nimport { Label } from \"./Label\";\r\n\r\ninterface tooltipOptions {\r\n    lineWidth: number;\r\n    lineColor: string;\r\n    brushColor: string;\r\n    mainSize: number;\r\n    lineDash: number[];\r\n}\r\n\r\n//описание класса\r\n\r\nexport class Tooltip {\r\n\r\n    _id: string;\r\n    type: string;\r\n    _options: tooltipOptions;\r\n    labels?: any[];\r\n    label: Label;\r\n\r\n    constructor(id: string, type: string, ...options: any) {\r\n        this._id = id;\r\n        this.type = type;\r\n\r\n        this._options = {\r\n            lineWidth: 1,\r\n            lineColor: '#000000',\r\n            brushColor: '#000000',\r\n            mainSize: 2,\r\n            lineDash: [],\r\n        };\r\n\r\n        this.label = new Label();\r\n\r\n        //if (labels) this.labels = labels;\r\n\r\n        this.setOptions(options);\r\n    }\r\n\r\n    get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    setOptions(options: any[]) {\r\n        switch (this.type) {\r\n            case 'circle_series':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                break;\r\n\r\n            case 'line_vertical_full':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.lineDash = options[2];\r\n                break;\r\n\r\n            case 'line_horizontal_end':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.lineDash = options[2];\r\n                break;\r\n\r\n            case 'label_x_start':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                this.labels = options[4];\r\n                break;\r\n\r\n            case 'circle_y_end':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                break;\r\n\r\n            case 'data_y_end':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                break;\r\n\r\n            case 'delta_abs':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                break;\r\n\r\n            case 'data_label':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this.labels = options[3];\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n\r\n    drawTooltip(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point, xyData: Point, ind: number, toDraw?: boolean) {\r\n        switch (this.type) {\r\n\r\n            case 'circle_series':\r\n                this.drawCircleSeries(ctx, ttCoord);\r\n                break;\r\n\r\n            case 'line_vertical_full':\r\n                this.drawLineVerticalFull(ctx, vp, ttCoord);\r\n                break;\r\n\r\n            case 'line_horizontal_end':\r\n                this.drawLineHorizontalEnd(ctx, vp, ttCoord);\r\n                break;\r\n\r\n            case 'label_x_start':\r\n                this.drawLabelXStart(ctx, vp, ttCoord, xyData, ind);\r\n                break;\r\n\r\n            case 'circle_y_end':\r\n                this.drawCircleYEnd(ctx, vp, ttCoord);\r\n                break;\r\n\r\n            case 'data_y_end':\r\n                return this.drawDataYEnd(ctx, vp, ttCoord, xyData, toDraw);\r\n\r\n            case 'delta_abs':\r\n                this.drawDeltaAbs(ctx, vp, ttCoord, xyData);\r\n                break;\r\n            \r\n            case 'data_label':\r\n                this.drawDataLabel(ctx, vp, ttCoord, xyData, ind);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    drawDataLabel(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point, seriesData: Point, ind: number) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n\r\n        const labelCoord = new Point(ttCoord.x, ttCoord.y);\r\n\r\n        //параметры начальные\r\n        this.label.position = 'top';\r\n        const lineX = ttCoord.x;\r\n\r\n        const rectPadding = 6;\r\n\r\n        // @ts-ignore\r\n        const labelText = this.labels[ind] + '; x: ' + (seriesData.x).toFixed(1) + '; y: '+ (seriesData.y).toFixed(1);\r\n        const cornersRadius = this._options.mainSize;\r\n\r\n        let labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n        let roundRect: Rectangle = new Rectangle(labelRect.x1 - rectPadding,\r\n            labelRect.y1 - rectPadding,\r\n            labelRect.x2 + rectPadding,\r\n            labelRect.y2 + rectPadding);\r\n        \r\n/*\r\n        if (roundRect.x2 > vp.x2) {\r\n            labelCoord.x = labelCoord.x - roundRect.x2 + vp.x2;\r\n            roundRect.move(- roundRect.x2 + vp.x2, 0)\r\n        }\r\n*/\r\n\r\n        if (roundRect.x2 > vp.x2) {\r\n            labelCoord.x = labelCoord.x - Math.abs(roundRect.x2 - vp.x2) - rectPadding;\r\n\r\n            labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n            roundRect = new Rectangle(labelRect.x1 - rectPadding,\r\n                labelRect.y1 - rectPadding,\r\n                labelRect.x2 + rectPadding,\r\n                labelRect.y2 + rectPadding);\r\n        }\r\n\r\n        if (roundRect.x1 < vp.x1) {\r\n            labelCoord.x = labelCoord.x + Math.abs(roundRect.x1 - vp.x1) + rectPadding;\r\n            \r\n            labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n            roundRect = new Rectangle(labelRect.x1 - rectPadding,\r\n                labelRect.y1 - rectPadding,\r\n                labelRect.x2 + rectPadding,\r\n                labelRect.y2 + rectPadding);\r\n        }\r\n\r\n\r\n        if (roundRect.y1 < vp.y1) {\r\n            this.label.position = 'bottom';\r\n            labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n            roundRect = new Rectangle(labelRect.x1 - rectPadding,\r\n                labelRect.y1 - rectPadding,\r\n                labelRect.x2 + rectPadding,\r\n                labelRect.y2 + rectPadding);\r\n\r\n            //labelCoord.y = labelCoord.y + vp.y1 - roundRect.y1;\r\n            //roundRect.move(0, vp.y1 - roundRect.y1);\r\n\r\n        }\r\n\r\n        this.roundRect(ctx, roundRect.x1, roundRect.y1, roundRect.width, roundRect.height, cornersRadius);\r\n\r\n        ctx.fill();\r\n        ctx.stroke();\r\n\r\n        this.label.draw(ctx, labelCoord, labelText);\r\n    }\r\n\r\n\r\n    drawCircleSeries(ctx: CanvasRenderingContext2D, ttCoord: Point) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n        ctx.beginPath();\r\n        ctx.arc(ttCoord.x, ttCoord.y, this._options.mainSize, 0, Math.PI * 2, true);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n\r\n    drawLineVerticalFull(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.setLineDash(this._options.lineDash);\r\n        ctx.beginPath();\r\n        ctx.moveTo(ttCoord.x, vp.y1);\r\n        ctx.lineTo(ttCoord.x, vp.zeroY);\r\n        ctx.stroke();\r\n        ctx.setLineDash([]);\r\n    }\r\n\r\n    drawLineHorizontalEnd(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.setLineDash(this._options.lineDash);\r\n        ctx.beginPath();\r\n        ctx.moveTo(ttCoord.x, ttCoord.y);\r\n        ctx.lineTo(vp.x2, ttCoord.y);\r\n        ctx.stroke();\r\n        ctx.setLineDash([]);\r\n    }\r\n\r\n\r\n    drawLabelXStart(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point, seriesData: Point, ind: number) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n\r\n        // параметры\r\n        const rectPadding = 6;\r\n        const rectWidth = 60;\r\n\r\n        // @ts-ignore\r\n        const labelText = (this.labels[ind]).toLocaleDateString('en');\r\n        const cornersRadius = this._options.mainSize;\r\n\r\n        const labelCoord = new Point(ttCoord.x, vp.zeroY);\r\n        const labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n\r\n        let labelCenter = new Point(labelCoord.x, labelRect.y1 + labelRect.height * 0.5);\r\n\r\n        let roundRect: Rectangle = new Rectangle(\r\n            labelCenter.x - rectWidth * 0.5,\r\n            labelCenter.y - rectPadding - labelRect.height * 0.5,\r\n            labelCenter.x + rectWidth * 0.5,\r\n            labelCenter.y + rectPadding + labelRect.height * 0.5\r\n        );\r\n\r\n\r\n        if (roundRect.x1 < vp.x1) {\r\n            labelCoord.x = labelCoord.x + vp.x1 - roundRect.x1;\r\n            roundRect.move(0, vp.x1 - roundRect.x1);\r\n        }\r\n\r\n        if (roundRect.x2 > vp.x2) {\r\n            labelCoord.x = labelCoord.x - (roundRect.x2 - vp.x2);\r\n            roundRect.move(0, -roundRect.x2 + vp.x2);\r\n        }\r\n\r\n        labelCenter = new Point(labelCoord.x, labelRect.y1 + labelRect.height * 0.5);\r\n\r\n        roundRect = new Rectangle(\r\n            labelCenter.x - rectWidth * 0.5,\r\n            labelCenter.y - rectPadding - labelRect.height * 0.5,\r\n            labelCenter.x + rectWidth * 0.5,\r\n            labelCenter.y + rectPadding + labelRect.height * 0.5\r\n        );\r\n\r\n\r\n        this.roundRect(ctx, roundRect.x1, roundRect.y1, roundRect.width, roundRect.height, cornersRadius);\r\n\r\n        ctx.fill();\r\n        ctx.stroke();\r\n        this.label.draw(ctx, labelCoord, labelText);\r\n\r\n        return roundRect\r\n    }\r\n\r\n    roundRect(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + radius, y);\r\n        ctx.lineTo(x + width - radius, y);\r\n        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n        ctx.lineTo(x + width, y + height - radius);\r\n        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n        ctx.lineTo(x + radius, y + height);\r\n        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n        ctx.lineTo(x, y + radius);\r\n        ctx.quadraticCurveTo(x, y, x + radius, y);\r\n        ctx.closePath();\r\n\r\n    }\r\n\r\n    drawCircleYEnd(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(vp.x2, ttCoord.y, this._options.mainSize, 0, Math.PI * 2, true);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n\r\n\r\n    drawDataYEnd(ctx: CanvasRenderingContext2D, vp: Rectangle, start_ttCoord: Point, seriesData: Point, toDraw?: boolean): Rectangle {\r\n        const ttCoord = new Point(start_ttCoord.x, start_ttCoord.y);\r\n\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n\r\n        // параметры\r\n\r\n        const rectPadding = 6;\r\n        const labelText = (seriesData.y).toFixed(1) + '%';\r\n        const cornersRadius = this._options.mainSize;\r\n\r\n        this.label.position = 'right'\r\n\r\n        const labelCoord = new Point(vp.x2, ttCoord.y);\r\n\r\n        const labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n\r\n        let labelStart = new Point(labelRect.x1, labelRect.y1);\r\n        let labelCenter = new Point(labelRect.x1 + labelRect.width*0.5, labelCoord.y);\r\n\r\n        const roundRectWidth = 40;\r\n\r\n        let roundRect: Rectangle = new Rectangle(labelCenter.x - roundRectWidth*0.5,\r\n            labelStart.y - rectPadding,\r\n            labelCenter.x + roundRectWidth*0.5,\r\n            labelStart.y  + labelRect.height + rectPadding);\r\n\r\n        /*\r\n        let roundRect: Rectangle = new Rectangle(vp.x2 + 11 - rectPadding + 3,\r\n            labelStart.y - rectPadding,\r\n            vp.x2 + rectPadding + 35 + 3,\r\n            labelStart.y  + labelRect.height + rectPadding);\r\n        */\r\n        \r\n\r\n        if (roundRect.y1 < vp.y1) {\r\n            labelCoord.y = labelCoord.y + vp.y1 - roundRect.y1;\r\n            ttCoord.y = labelCoord.y;\r\n            roundRect.move(0, vp.y1 - roundRect.y1);\r\n        }\r\n\r\n        if (roundRect.y2 > vp.y2) {\r\n            labelCoord.y = labelCoord.y - (roundRect.y2 - vp.y2);\r\n            ttCoord.y = labelCoord.y;\r\n            roundRect.move(0, -roundRect.y2 + vp.y2);\r\n        }\r\n\r\n        this.roundRect(ctx, roundRect.x1, roundRect.y1, roundRect.width, roundRect.height, cornersRadius);\r\n\r\n        //labelCoord.x = roundRect.x1+roundRect.width*0.5-labelRect.width*0.5-this.label.offset;\r\n\r\n        if (toDraw) {\r\n            ctx.fill();\r\n            ctx.stroke();\r\n            this.label.draw(ctx, labelCoord, labelText);\r\n        }\r\n\r\n        //console.log(labelCoord, labelText);\r\n        return roundRect\r\n    }\r\n\r\n\r\n    drawDeltaAbs(ctx: CanvasRenderingContext2D, vp: Rectangle, ttCoord: Point, seriesData: Point) {\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.fillStyle = this._options.brushColor;\r\n        ctx.setLineDash(this._options.lineDash);\r\n\r\n        const labelCoord = new Point(ttCoord.x, ttCoord.y);\r\n\r\n        //параметры начальные\r\n        this.label.position = 'right';\r\n    \r\n        const lineX = ttCoord.x;\r\n        labelCoord.y = labelCoord.y - 25;\r\n        const rectPadding = 6;\r\n        const labelText = 'Δ ' + (seriesData.y).toFixed(1) + 'pp';\r\n        const cornersRadius = this._options.mainSize;\r\n\r\n        let labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n        let labelStart = new Point(labelRect.x1, labelRect.y1);\r\n\r\n        let labelCenter = new Point(labelRect.x1 + labelRect.width*0.5, labelCoord.y);\r\n\r\n        const roundRectWidth = 52;\r\n\r\n        let roundRect: Rectangle = new Rectangle(labelCenter.x - roundRectWidth*0.5,\r\n            labelStart.y - rectPadding,\r\n            labelCenter.x + roundRectWidth*0.5,\r\n            labelStart.y  + labelRect.height + rectPadding);\r\n\r\n        /*\r\n        let roundRect: Rectangle = new Rectangle(labelStart.x - rectPadding,\r\n            labelStart.y - rectPadding,\r\n            labelStart.x - rectPadding + labelRect.width + 2 * rectPadding,\r\n            labelStart.y - rectPadding + labelRect.height + 2 * rectPadding);\r\n        */\r\n\r\n        if (roundRect.x2 > vp.x2) {\r\n            labelCoord.x = labelCoord.x - roundRect.x2 + vp.x2;\r\n            roundRect.move(- roundRect.x2 + vp.x2, 0)\r\n        }\r\n\r\n        if (roundRect.x1 < lineX) {\r\n            labelCoord.x = lineX;\r\n            this.label.position = 'left';\r\n            labelRect = this.label.getlabelRect(ctx, labelCoord, labelText);\r\n            labelStart = new Point(labelRect.x2, labelRect.y1);\r\n\r\n            roundRect = new Rectangle(labelStart.x - labelRect.width - rectPadding,\r\n                labelStart.y - rectPadding,\r\n                labelStart.x + rectPadding,\r\n                labelStart.y + labelRect.height + rectPadding);\r\n        }\r\n\r\n        if (roundRect.y1 < vp.y1) {\r\n            labelCoord.y = labelCoord.y + vp.y1 - roundRect.y1;\r\n            roundRect.move(0, vp.y1 - roundRect.y1);\r\n        }\r\n\r\n        this.roundRect(ctx, roundRect.x1, roundRect.y1, roundRect.width, roundRect.height, cornersRadius);\r\n\r\n        ctx.fill();\r\n        ctx.stroke();\r\n\r\n        this.label.draw(ctx, labelCoord, labelText);\r\n    }\r\n\r\n}","import { Point } from \"./Point\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { Tooltip } from \"./Tooltip\";\r\nimport { Label } from \"./Label\";\r\n\r\ninterface plotOptions {\r\n    lineWidth: number;\r\n    lineColor: string;\r\n    lineDash: number[];\r\n    brushColor: string;\r\n    mainSize: number;\r\n    fontSize: number;\r\n    char: string;\r\n\r\n}\r\n\r\n//описание класса\r\n\r\nexport class Plot {\r\n\r\n    _id: string;\r\n    type: string;\r\n    _options: plotOptions;\r\n    tooltips: Tooltip[];\r\n    label: Label;\r\n\r\n    constructor(id: string, type: string, ...options: any) {\r\n\r\n        this._id = id;\r\n        this.type = type;\r\n\r\n        this._options = {\r\n            lineWidth: 0.5,\r\n            lineColor: '#000000',\r\n            brushColor: '#000000',\r\n            mainSize: 1,\r\n            fontSize: 10,\r\n            char: '1',\r\n            lineDash: [],\r\n        };\r\n\r\n        this.setOptions(options);\r\n        this.tooltips = [];\r\n\r\n        this.label = new Label(this.type);\r\n        return this;\r\n    }\r\n\r\n\r\n    setOptions(options: any[]) {\r\n\r\n        switch (this.type) {\r\n            case 'dotted':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                this._options.mainSize = options[3];\r\n                break;\r\n\r\n            case 'line':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.lineDash = options[2];\r\n                break;\r\n\r\n            case 'area':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                break;\r\n\r\n            case 'area_bottom':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                this._options.brushColor = options[2];\r\n                break;\r\n\r\n            case 'unicode':\r\n                this._options.fontSize = options[0];\r\n                this._options.brushColor = options[1];\r\n                this._options.char = options[2];\r\n                break;\r\n\r\n            case 'text':\r\n                this._options.lineWidth = options[0];\r\n                this._options.lineColor = options[1];\r\n                break;\r\n        }\r\n    }\r\n\r\n    get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n\r\n\r\n    drawPlot(ctx: CanvasRenderingContext2D, plotData: Point[], vp: Rectangle, labels: string[], highlighted?: boolean) {\r\n\r\n        ctx.strokeStyle = this._options.lineColor;\r\n        ctx.lineWidth = this._options.lineWidth;\r\n        ctx.globalAlpha = 1;\r\n        ctx.fillStyle = this._options.brushColor;\r\n\r\n        switch (this.type) {\r\n            case 'dotted':\r\n                this.drawDotted(ctx, plotData);\r\n                break;\r\n\r\n            case 'line':\r\n                this.drawLine(ctx, plotData);\r\n                break;\r\n\r\n            case 'area':\r\n                this.drawArea(ctx, plotData, vp);\r\n                break;\r\n\r\n            case 'area_bottom':\r\n                this.drawArea(ctx, plotData, vp);\r\n                break;\r\n\r\n            case 'unicode':\r\n                this.drawUnicode(ctx, plotData, highlighted);\r\n                break;\r\n\r\n            case 'text':\r\n                this.drawText(ctx, plotData, labels);\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    drawDotted(ctx: CanvasRenderingContext2D, plotData: Point[]) {\r\n\r\n        for (let i = 0; i < plotData.length; i++) {\r\n            ctx.beginPath();\r\n            ctx.arc(plotData[i].x, plotData[i].y, this._options.mainSize, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    drawUnicode(ctx: CanvasRenderingContext2D, plotData: Point[], highlighted?: boolean) {\r\n        ctx.font = `${this._options.fontSize}px serif`;\r\n        ctx.textBaseline = 'middle';\r\n\r\n        const text = ctx.measureText(this._options.char);\r\n        for (let i = 0; i < plotData.length; i++) {\r\n            ctx.globalAlpha = 1;\r\n            ctx.fillText(this._options.char, plotData[i].x - text.width * 0.5, plotData[i].y);\r\n            if (highlighted) {\r\n                ctx.lineWidth = 7;\r\n                ctx.globalAlpha = 0.3;\r\n                ctx.strokeText(this._options.char, plotData[i].x - text.width * 0.5, plotData[i].y);\r\n                ctx.globalAlpha = 1;\r\n                ctx.fillText(this._options.char, plotData[i].x - text.width * 0.5, plotData[i].y);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    drawText(ctx: CanvasRenderingContext2D, plotData: Point[], labels: string[]) {\r\n\r\n        for (let i = 0; i < plotData.length; i++) {\r\n\r\n            ctx.globalAlpha = 1;\r\n            ctx.beginPath();\r\n            ctx.setLineDash([]);\r\n            ctx.moveTo(plotData[i].x, plotData[i].y - 10);\r\n            ctx.lineTo(plotData[i].x, plotData[i].y - 25)\r\n            ctx.stroke();\r\n            \r\n        }\r\n\r\n        for (let i = 0; i < plotData.length; i++) {\r\n\r\n            let printText = labels[i]\r\n            if (!printText) printText = '';\r\n            let printTextArr = printText.split('\\\\n');\r\n\r\n            printTextArr.forEach((row, ind, mas)=> {\r\n                const coord: Point = new Point(plotData[i].x, plotData[i].y - (mas.length - ind - 1)*this.label.getRowHeight(ctx))\r\n                this.label.draw(ctx, coord, row);\r\n            });\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    drawLine(ctx: CanvasRenderingContext2D, plotData: Point[]) {\r\n\r\n        ctx.setLineDash(this._options.lineDash);\r\n        ctx.beginPath();\r\n        ctx.moveTo(plotData[0].x, plotData[0].y);\r\n\r\n        for (let i = 1; i < plotData.length; i++) {\r\n            ctx.lineTo(plotData[i].x, plotData[i].y)\r\n        }\r\n\r\n        ctx.stroke();\r\n    }\r\n\r\n    drawArea(ctx: CanvasRenderingContext2D, plotData: Point[], vp: Rectangle) {\r\n\r\n        ctx.beginPath();\r\n\r\n        if (this.type == 'area_bottom') {\r\n            ctx.lineTo(vp.x1, vp.zeroY);\r\n        }\r\n\r\n        ctx.lineTo(plotData[0].x, plotData[0].y);\r\n\r\n        for (let i = 1; i < plotData.length; i++) {\r\n            ctx.lineTo(plotData[i].x, plotData[i].y)\r\n        }\r\n\r\n        if (this.type == 'area_bottom') {\r\n            ctx.lineTo(vp.x2, vp.zeroY);\r\n            //ctx.lineTo(vp.x1, vp.zeroY);\r\n        }\r\n\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n\r\n\r\n    addTooltip(id: string, type: string, ...options: any): Tooltip {\r\n        const tooltip = new Tooltip(id, type, ...options);\r\n        this.tooltips.push(tooltip);\r\n        return tooltip;\r\n    }\r\n\r\n    findTooltipById(id: string): Tooltip | null {\r\n        const tooltips: Tooltip[] = this.tooltips.filter((tooltip) => {\r\n            return tooltip.id === id\r\n        });\r\n        if (tooltips.length !== 0) return tooltips[0];\r\n        return null;\r\n    }\r\n\r\n}","import { Rectangle } from \"./Rectangle\";\r\nimport { Point } from \"./Point\";\r\n\r\nexport class Transformer {\r\n\r\n    matrix: number[];\r\n\r\n    constructor() {\r\n        this.matrix = [];\r\n    }\r\n\r\n    getPlotRect(axisRect: Rectangle, seriesRect: Rectangle, vp: Rectangle): Rectangle {\r\n        let tx: number = (seriesRect.x1 - axisRect.x1);\r\n        let ty: number = -(seriesRect.y2 - axisRect.y2);\r\n        const scaleX = seriesRect.width / axisRect.width;\r\n        const scaleY = seriesRect.height / axisRect.height;\r\n        tx = Math.round(tx*vp.width/axisRect.width); \r\n        ty = Math.round(ty*vp.height/axisRect.height);\r\n        this.matrix = [scaleX, 0, tx, 0, scaleY, ty]; \r\n        return this.transform(vp);\r\n    }\r\n\r\n\r\n    getVeiwportCoord(fromRect: Rectangle, toRect: Rectangle, point: Point): Point {\r\n        let tx: number = (point.x - fromRect.x1);\r\n        let ty: number = -(point.y - fromRect.y2);\r\n        tx = Math.round(tx*toRect.width/fromRect.width); \r\n        ty = Math.round(ty*toRect.height/fromRect.height);\r\n        this.matrix = [0, 0, tx, 0, 0, ty];\r\n        const coordRect = this.transform(toRect);\r\n        const coord = new Point(coordRect.zeroX, coordRect.zeroY)\r\n        return coord;\r\n    }\r\n\r\n\r\n\r\n    transform(viewport: Rectangle): Rectangle {\r\n\r\n        let matrix: number[] = [1, 0, 0, 0, 1, 0];\r\n\r\n        if (this.matrix) {matrix = this.matrix;}\r\n\r\n        let x1: number;\r\n        let y1: number;\r\n        let x2: number;\r\n        let y2: number;   \r\n    \r\n        x1 = this.transFunc(0, 0, matrix.slice(0,3))+viewport.x1;\r\n        y1 = this.transFunc(0, 0, matrix.slice(3))+viewport.y1;\r\n        x2 = this.transFunc(viewport.width, viewport.height, matrix.slice(0,3))+viewport.x1;\r\n        y2 = this.transFunc(viewport.width, viewport.height, matrix.slice(3))+viewport.y1;\r\n\r\n        return new Rectangle(x1, y1, x2, y2);\r\n    }\r\n\r\n    transFunc(x: number, y: number, coeff: number[]): number {  \r\n        let res:number;\r\n        return res = coeff[0]*x + coeff[1]*y + coeff[2];\r\n    }\r\n\r\n}","import { Signal } from \"signals\"\r\nimport { Point } from \"./Point\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { Label } from \"./Label\";\r\nimport { Transformer } from \"./Transformer\";\r\n\r\n\r\nexport class Ticks {\r\n\r\n    display: boolean = false;\r\n    hasCustomLabels: boolean = false;\r\n    hasAnimation: boolean = false;\r\n    animationDuration: number = 300;\r\n\r\n    timeFunc: (time: number) => number = function (time) {\r\n        return time;\r\n      };\r\n\r\n    label: Label;\r\n\r\n    type: string;\r\n    distributionType: string;\r\n    count: number;\r\n    step: number;\r\n\r\n    coords: Point[];\r\n    values: number[];\r\n    labels: string[];\r\n\r\n    customLabels?: string[];\r\n    customTicksOptions?: any[];\r\n\r\n    // параметры отрисовки тика\r\n    linewidth: number = 2;\r\n    tickSize: number = 5;\r\n    color: string = 'black';\r\n    lineDash: number[] = [];\r\n\r\n    onOptionsSetted: Signal;\r\n    onCustomLabelsAdded: Signal;\r\n    onCoordsChanged: Signal;\r\n\r\n    constructor(axistype: string) {\r\n        this.onOptionsSetted = new Signal();\r\n        this.onCustomLabelsAdded = new Signal();\r\n        this.onCoordsChanged = new Signal();\r\n\r\n        this.coords = [];\r\n        this.values = [];\r\n        this.labels = [];\r\n\r\n        this.type = axistype;\r\n\r\n        this.label = new Label(this.type);\r\n\r\n\r\n        this.distributionType = 'default';\r\n        this.count = 5;\r\n        this.step = 100;\r\n\r\n        this.bindChildSignals();\r\n    }\r\n\r\n    switchAnimation(hasAnimation: boolean, duration?: number) {\r\n        this.hasAnimation = hasAnimation;\r\n        if (duration) this.animationDuration = duration;\r\n    }\r\n\r\n    bindChildSignals() {\r\n\r\n    }\r\n\r\n    setCustomLabels(labels: string[]) {\r\n        this.hasCustomLabels = true;\r\n        this.customLabels = labels;\r\n        this.onCustomLabelsAdded.dispatch();\r\n    }\r\n\r\n    settickDrawOptions(length: number, width: number, color: string, lineDash?: number[]) {\r\n        this.linewidth = width;\r\n        this.tickSize = length;\r\n        this.color = color;\r\n        if (lineDash) this.lineDash = lineDash;\r\n    }\r\n\r\n\r\n    setOptions(display: boolean, distributionType: string, ...options: any[]) {\r\n\r\n        this.display = display;\r\n\r\n        switch (distributionType) {\r\n            case 'default':\r\n                this.distributionType = distributionType;\r\n                this.count = options[0];\r\n                break;\r\n\r\n            case 'fixedCount':\r\n                this.distributionType = distributionType;\r\n                this.count = options[0];\r\n                break;\r\n\r\n            case 'fixedStep':\r\n                this.distributionType = distributionType;\r\n                this.step = options[0];\r\n                break;\r\n\r\n            case 'customDateTicks':\r\n                this.distributionType = distributionType;\r\n                if (options.length !== 0) this.customTicksOptions = options[0];\r\n                break;\r\n\r\n            case 'niceCbhStep':\r\n                this.distributionType = distributionType;\r\n                if (options.length !== 0) this.customTicksOptions = options[0];\r\n                break;\r\n\r\n            case 'midStep':\r\n                this.distributionType = distributionType;\r\n                this.count = options[0];\r\n                break;\r\n\r\n            case 'zero':\r\n                this.distributionType = distributionType;\r\n                break;\r\n\r\n            case 'min':\r\n                this.distributionType = distributionType;\r\n                break;\r\n\r\n\r\n        }\r\n        this.onOptionsSetted.dispatch();\r\n    }\r\n\r\n\r\n    createTicks(min: number, max: number, vp: Rectangle, ctx: CanvasRenderingContext2D, noAnimate?: boolean) {\r\n        let coords = [];\r\n\r\n        switch (this.distributionType) {\r\n            case 'default':\r\n                coords = this.generateFixedCountTicks(min, max, vp);\r\n                break;\r\n\r\n            case 'fixedStep':\r\n                coords = this.generateFixedStepTicks(min, max, vp);\r\n                break;\r\n\r\n            case 'fixedCount':\r\n                coords = this.generateFixedCountTicks(min, max, vp);\r\n                break;\r\n\r\n            case 'customDateTicks':\r\n                coords = this.generateCustomDateTicks(min, max, vp, ctx);\r\n                break;\r\n\r\n            case 'niceCbhStep':\r\n                coords = this.generateNiceCbhTicks(min, max, vp);\r\n                break;\r\n\r\n            case 'midStep':\r\n                coords = this.generateMidStep(min, max, vp);\r\n                break;\r\n\r\n            case 'zero':\r\n                coords = this.generateOneTick(min, max, vp, 0);\r\n                break;\r\n                \r\n            case 'min':\r\n                coords = this.generateOneTick(min, max, vp, min);\r\n                break;\r\n        }\r\n\r\n        //если нужна анимация тиков\r\n        if ((this.hasAnimation) && (!noAnimate)) {\r\n            const from = this.makeFromPointArr(this.coords, coords);\r\n\r\n            if (from.length == 0) {\r\n                this.coords = coords;\r\n                this.onCoordsChanged.dispatch();\r\n                return this;\r\n            }\r\n\r\n            this.coords = from;\r\n            this.onCoordsChanged.dispatch();\r\n            this.tickCoordAnimation(from, coords, this.animationDuration);\r\n\r\n            return this\r\n        }\r\n\r\n        this.coords = coords;\r\n        this.onCoordsChanged.dispatch();\r\n    }\r\n\r\n    generateOneTick(min: number, max: number, vp: Rectangle, value: number) {\r\n        let coords = [];\r\n        this.values = [];\r\n        this.labels = [];\r\n        let rectXY: number[] = [];\r\n        const transformer = new Transformer();\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                rectXY = [0, min, 1, max];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                rectXY = [min, 0, max, 1];\r\n                break;\r\n        }\r\n\r\n        const fromRect = new Rectangle(rectXY[0], rectXY[1], rectXY[2], rectXY[3]);\r\n\r\n        let pointXY: number[] = [];\r\n\r\n        if (this.hasCustomLabels) {\r\n            // @ts-ignore\r\n            this.labels.push(this.customLabels[0]);\r\n        } else {\r\n            this.labels.push(value.toFixed(2).toString());\r\n        }\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                pointXY = [0, value];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                pointXY = [value, 0];\r\n                break;\r\n        }\r\n\r\n        const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n        const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n        coords.push(coordPoint);\r\n        this.values.push(value);\r\n\r\n        return coords;\r\n    }\r\n\r\n    generateMidStep(min: number, max: number, vp: Rectangle) {\r\n        let coords = [];\r\n        this.values = [];\r\n        this.labels = [];\r\n        let stepCoord = 0;\r\n        let rectXY: number[] = [];\r\n        const transformer = new Transformer();\r\n\r\n        let stepValue = Math.abs(max - min) / (this.count);\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                stepCoord = vp.height / this.count;\r\n                rectXY = [0, min, 1, max];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                stepCoord = vp.width / this.count;\r\n                rectXY = [min, 0, max, 1];\r\n                break;\r\n        }\r\n\r\n        const fromRect = new Rectangle(rectXY[0], rectXY[1], rectXY[2], rectXY[3]);\r\n\r\n\r\n        for (let i = 0; i <= this.count - 1; i++) {\r\n\r\n            let pointXY: number[] = [];\r\n\r\n            let value = min + i * stepValue + stepValue * 0.5;\r\n\r\n            if (this.hasCustomLabels) {\r\n                //value = Math.round(value);\r\n                // @ts-ignore\r\n                this.labels.push(this.customLabels[0]);\r\n            } else {\r\n                this.labels.push(value.toFixed(2).toString());\r\n            }\r\n\r\n            switch (this.type) {\r\n                case 'vertical':\r\n                    pointXY = [0, value];\r\n                    break;\r\n\r\n                case 'horizontal':\r\n                    pointXY = [value, 0];\r\n                    break;\r\n            }\r\n\r\n            const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n            const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n            coords.push(coordPoint);\r\n            this.values.push(value);\r\n\r\n        }\r\n\r\n        return coords;\r\n    }\r\n\r\n\r\n    generateFixedCountTicks(min: number, max: number, vp: Rectangle) {\r\n        let coords = [];\r\n        this.values = [];\r\n        this.labels = [];\r\n        let stepCoord = 0;\r\n        let rectXY: number[] = [];\r\n        const transformer = new Transformer();\r\n\r\n        let stepValue = Math.abs(max - min) / this.count;\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                stepCoord = vp.height / this.count;\r\n                rectXY = [0, min, 1, max];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                stepCoord = vp.width / this.count;\r\n                rectXY = [min, 0, max, 1];\r\n                break;\r\n        }\r\n\r\n        const fromRect = new Rectangle(rectXY[0], rectXY[1], rectXY[2], rectXY[3]);\r\n\r\n\r\n        for (let i = 0; i <= this.count; i++) {\r\n\r\n            let pointXY: number[] = [];\r\n\r\n            let value = min + i * stepValue;\r\n\r\n            if (this.hasCustomLabels) {\r\n                value = Math.round(value);\r\n                // @ts-ignore\r\n                this.labels.push(this.customLabels[value]);\r\n            } else {\r\n                this.labels.push(value.toFixed(2).toString());\r\n            }\r\n\r\n            switch (this.type) {\r\n                case 'vertical':\r\n                    pointXY = [0, value];\r\n                    break;\r\n\r\n                case 'horizontal':\r\n                    pointXY = [value, 0];\r\n                    break;\r\n            }\r\n\r\n            const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n            const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n            coords.push(coordPoint);\r\n            this.values.push(value);\r\n\r\n        }\r\n\r\n        return coords;\r\n    }\r\n\r\n\r\n    generateFixedStepTicks(min: number, max: number, vp: Rectangle, step?: number, toFixed?: number) {\r\n        let coords = [];\r\n        this.values = [];\r\n        this.labels = [];\r\n        let rectXY: number[] = [];\r\n\r\n        let tickStep = this.step;\r\n\r\n        if (step) {\r\n            tickStep = step;\r\n        }\r\n\r\n\r\n\r\n        const transformer = new Transformer();\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                rectXY = [0, min, 1, max];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                rectXY = [min, 0, max, 1];\r\n                break;\r\n        }\r\n\r\n        const fromRect = new Rectangle(rectXY[0], rectXY[1], rectXY[2], rectXY[3]);\r\n\r\n        const startValue = 0;\r\n        let curValue = startValue;\r\n\r\n        while (curValue < max) {\r\n            if ((curValue >= min) && (curValue <= max)) {\r\n\r\n\r\n                let pointXY: number[] = [];\r\n                let value = curValue;\r\n\r\n                if (this.hasCustomLabels) {\r\n                    value = Math.round(curValue);\r\n                    // @ts-ignore\r\n                    this.labels.push(this.customLabels[value]);\r\n                } else {\r\n                    if (toFixed !== null) {\r\n                        this.labels.push(value.toFixed(toFixed).toString())\r\n                    } else {\r\n                        this.labels.push(value.toFixed(2).toString());\r\n                    }\r\n                }\r\n\r\n                switch (this.type) {\r\n                    case 'vertical':\r\n                        pointXY = [0, value];\r\n                        break;\r\n\r\n                    case 'horizontal':\r\n                        pointXY = [value, 0];\r\n                        break;\r\n                }\r\n\r\n\r\n                const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n                const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n                coords.push(coordPoint);\r\n                this.values.push(value);\r\n            }\r\n\r\n            curValue = curValue + tickStep;\r\n        }\r\n\r\n        curValue = startValue;\r\n        curValue = curValue - tickStep;\r\n\r\n        while (curValue > min) {\r\n            if ((curValue >= min) && (curValue <= max)) {\r\n\r\n\r\n                let pointXY: number[] = [];\r\n                let value = curValue;\r\n\r\n                if (this.hasCustomLabels) {\r\n                    value = Math.round(curValue);\r\n                    // @ts-ignore\r\n                    this.labels.push(this.customLabels[value]);\r\n                } else {\r\n                    if (toFixed !== null) {\r\n                        this.labels.push(value.toFixed(toFixed).toString())\r\n                    } else {\r\n                        this.labels.push(value.toFixed(2).toString());\r\n                    }\r\n                }\r\n\r\n                switch (this.type) {\r\n                    case 'vertical':\r\n                        pointXY = [0, value];\r\n                        break;\r\n\r\n                    case 'horizontal':\r\n                        pointXY = [value, 0];\r\n                        break;\r\n                }\r\n\r\n\r\n                const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n                const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n                coords.push(coordPoint);\r\n                this.values.push(value);\r\n            }\r\n\r\n            curValue = curValue - tickStep;\r\n        }\r\n\r\n        return coords;\r\n    }\r\n\r\n    generateNiceCbhTicks(min: number, max: number, vp: Rectangle) {\r\n        let coords = [];\r\n\r\n        let deviation = Math.abs(max - min);\r\n        let devInd = 0;\r\n\r\n        // @ts-ignore\r\n        for (let j = 0; j < this.customTicksOptions.length; j++) {\r\n            // @ts-ignore\r\n            coords = this.generateFixedStepTicks(min, max, vp, this.customTicksOptions[j], 0);\r\n            const maxValue = this.values.reduce((prev, element) => {\r\n                return (element > prev) ? element : prev;\r\n            }, this.values[0])\r\n\r\n            if ((Math.abs(maxValue - max) < deviation) && (coords.length <= 10) && (coords.length >= 4)) {\r\n                devInd = j;\r\n                deviation = Math.abs(maxValue - max);\r\n            }\r\n\r\n        }\r\n        // @ts-ignore\r\n        coords = this.generateFixedStepTicks(min, max, vp, this.customTicksOptions[devInd], 0);\r\n\r\n\r\n        return coords;\r\n    }\r\n\r\n\r\n    generateCustomDateTicks(min: number, max: number, vp: Rectangle, ctx: CanvasRenderingContext2D) {\r\n        let coords = [];\r\n        // @ts-ignore\r\n        for (let j = 0; j < this.customTicksOptions.length; j++) {\r\n\r\n            const ticksArr = this.generateCustomDateTicksByOption(j, min, max, vp, ctx);\r\n\r\n            coords = ticksArr[0];\r\n            let values = ticksArr[1];\r\n            let labels = ticksArr[2];\r\n\r\n            if (this.checkLabelsOverlap(ctx, coords, labels)) {\r\n\r\n                this.values = values;\r\n                this.labels = labels;\r\n\r\n                return coords;\r\n            }\r\n\r\n        }\r\n\r\n        return coords;\r\n    }\r\n\r\n\r\n    // Метод анимации изменение набора координат тиков\r\n    tickCoordAnimation(from: Point[], to: Point[], duration: number) {\r\n\r\n        let start = performance.now();\r\n        // @ts-ignore \r\n        const animate = (time) => {\r\n\r\n\r\n            let tekTime = (time - start) / duration\r\n            let timeFraction = this.timeFunc(tekTime);\r\n\r\n            if (tekTime > 1) tekTime = 1;\r\n\r\n            const tek = from.map((el, i) => {\r\n                return new Point(from[i].x + (to[i].x - from[i].x) * timeFraction, from[i].y + (to[i].y - from[i].y) * timeFraction);\r\n            });\r\n\r\n            this.coords = tek;\r\n            this.onCoordsChanged.dispatch();\r\n\r\n            if (tekTime < 1) {\r\n                requestAnimationFrame(animate);\r\n            } else {\r\n                this.coords = to;\r\n                this.onCoordsChanged.dispatch();\r\n            }\r\n\r\n        }\r\n\r\n        requestAnimationFrame(animate);\r\n\r\n    }\r\n\r\n\r\n    makeFromPointArr(from: Point[], to: Point[]): Point[] {\r\n        const resultArr: Point[] = [];\r\n\r\n        to.forEach((toPoint) => {\r\n            if (from.length !== 0) {\r\n                const minP = from.reduce((fromPoint, cur) => {\r\n                    if (fromPoint.findDist(toPoint) < cur.findDist(toPoint)) return fromPoint\r\n                    return cur;\r\n                }, from[0])\r\n                resultArr.push(minP);\r\n            }\r\n        });\r\n\r\n        return resultArr;\r\n    }\r\n\r\n\r\n    // генерация пробных тиков\r\n\r\n    generateCustomDateTicksByOption(j: number, min: number, max: number, vp: Rectangle, ctx: CanvasRenderingContext2D): any[] {\r\n\r\n\r\n        const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\n\r\n        let rectXY: number[] = [];\r\n        const transformer = new Transformer();\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                rectXY = [0, min, 1, max];\r\n                break;\r\n\r\n            case 'horizontal':\r\n                rectXY = [min, 0, max, 1];\r\n                break;\r\n        }\r\n\r\n        const fromRect = new Rectangle(rectXY[0], rectXY[1], rectXY[2], rectXY[3]);\r\n\r\n        let pointXY: number[] = [];\r\n\r\n        let coords = [];\r\n        let values = [];\r\n        let labels = [];\r\n\r\n        let yearDel = 1;\r\n        // @ts-ignore\r\n        const partYear = this.customTicksOptions[j];\r\n        switch (partYear) {\r\n            case '5m':\r\n                yearDel = 2;\r\n                break;\r\n\r\n            case '3m':\r\n                yearDel = 3;\r\n                break;\r\n\r\n            case '2m':\r\n                yearDel = 4;\r\n                break;\r\n\r\n            case '1m':\r\n                yearDel = 6;\r\n                break;\r\n\r\n            case 'only year':\r\n                yearDel = 12;\r\n             break;\r\n        }\r\n\r\n        // @ts-ignore\r\n        let last = (max > this.customLabels.length) ? this.customLabels.length : max;\r\n\r\n        for (let i = min + 1; i <= last - 1 ; i++) {\r\n\r\n            // @ts-ignore\r\n            let curDate: Date = this.customLabels[i];\r\n            // @ts-ignore\r\n            let preDate: Date = this.customLabels[i - 1];\r\n\r\n            //начала годов\r\n            if ((curDate.getFullYear() - preDate.getFullYear()) !== 0) {\r\n\r\n                switch (this.type) {\r\n                    case 'vertical':\r\n                        pointXY = [0, i];\r\n                        break;\r\n\r\n                    case 'horizontal':\r\n                        pointXY = [i, 0];\r\n                        break;\r\n                }\r\n\r\n                const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n                const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n                coords.push(coordPoint);\r\n                values.push(i);\r\n                labels.push(curDate.getFullYear());\r\n            } else {\r\n                //начала месяцев\r\n                // @ts-ignore\r\n                if ((this.customTicksOptions[j] !== partYear) || (!(curDate.getMonth() % yearDel))) {\r\n                    if ((curDate.getMonth() - preDate.getMonth()) !== 0) {\r\n\r\n                        switch (this.type) {\r\n                            case 'vertical':\r\n                                pointXY = [0, i];\r\n                                break;\r\n\r\n                            case 'horizontal':\r\n                                pointXY = [i, 0];\r\n                                break;\r\n                        }\r\n\r\n                        const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n                        const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n                        coords.push(coordPoint);\r\n                        values.push(i);\r\n                        labels.push(monthNames[curDate.getMonth()]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            //середины месяцев\r\n            // @ts-ignore\r\n            if (this.customTicksOptions[j] == 'half month') {\r\n                if ((curDate.getDay() !== 0) && (curDate.getDay() !== 6)) {\r\n                    if ((curDate.getDate() == 14 || curDate.getDate() == 15 || curDate.getDate() == 16) &&\r\n                        (curDate.getDay() == 1 || curDate.getDay() == 4) || (curDate.getDate() == 14 && curDate.getDay() == 5)) {\r\n                        switch (this.type) {\r\n                            case 'vertical':\r\n                                pointXY = [0, i];\r\n                                break;\r\n\r\n                            case 'horizontal':\r\n                                pointXY = [i, 0];\r\n                                break;\r\n                        }\r\n\r\n                        const valuePoint = new Point(pointXY[0], pointXY[1]);\r\n                        const coordPoint = transformer.getVeiwportCoord(fromRect, vp, valuePoint);\r\n                        coords.push(coordPoint);\r\n                        values.push(i);\r\n                        labels.push(curDate.getDate());\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return [coords, values, labels];\r\n    }\r\n\r\n\r\n\r\n\r\n    checkLabelsOverlap(ctx: CanvasRenderingContext2D, coords: Point[], labels: string[]): boolean {\r\n        for (let i = 1; i < coords.length; i++) {\r\n            const curRec = this.label.getlabelRect(ctx, coords[i], labels[i]);\r\n            const preRec = this.label.getlabelRect(ctx, coords[i - 1], labels[i - 1]);\r\n            if (curRec.countDistBetweenRects(this.type, preRec) <= 3) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    draw(ctx: CanvasRenderingContext2D, viewport: Rectangle) {\r\n        this.coords.forEach((tickCoord, i) => {\r\n            if (this.display) this.drawTick(ctx, tickCoord);\r\n            if (this.label.display) this.label.draw(ctx, tickCoord, this.labels[i]);\r\n        });\r\n    }\r\n\r\n\r\n    drawTick(ctx: CanvasRenderingContext2D, tick: Point) {\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = this.color;\r\n        ctx.lineWidth = this.linewidth;\r\n        ctx.setLineDash(this.lineDash);\r\n        let r = this.tickSize;\r\n\r\n        switch (this.type) {\r\n            case 'vertical':\r\n                ctx.moveTo(tick.x - r, tick.y);\r\n                ctx.lineTo(tick.x, tick.y);\r\n                ctx.stroke();\r\n                break;\r\n\r\n            case 'horizontal':\r\n                ctx.moveTo(tick.x, tick.y - r);\r\n                ctx.lineTo(tick.x, tick.y);\r\n                ctx.stroke();\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n}","import { Rectangle } from \"./Rectangle\";\r\nimport { Point } from \"./Point\";\r\nimport { Signal } from \"signals\"\r\n\r\nexport class Grid {\r\n    \r\n    display: boolean = false;\r\n\r\n    type: string;\r\n    width: number;\r\n    color: string;\r\n    lineDash: number[];\r\n    onOptionsSetted: Signal;\r\n\r\n    constructor(type: string) {\r\n        this.onOptionsSetted = new Signal();\r\n        this.type = type;\r\n        this.width = 1;\r\n        this.color = 'black';\r\n        this.lineDash = [1,0];\r\n    }\r\n\r\n    setOptions(display: boolean, color:string, width: number, lineDash: number[]) {\r\n        \r\n        this.display = display;\r\n        this.width = width;\r\n        this.color = color;\r\n        this.lineDash = lineDash;\r\n\r\n        this.onOptionsSetted.dispatch();\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D, vp:Rectangle, coords: Point[]) {\r\n        ctx.strokeStyle = this.color;\r\n        ctx.fillStyle = this.color;\r\n        ctx.lineWidth = this.width;\r\n        ctx.setLineDash(this.lineDash);\r\n\r\n        coords.forEach((tick)=>{\r\n            ctx.beginPath();\r\n            switch (this.type) {\r\n                case 'vertical':\r\n                    ctx.moveTo(vp.x1, tick.y);\r\n                    ctx.lineTo(vp.x2, tick.y);\r\n                break;\r\n    \r\n                case 'horizontal':\r\n                    ctx.moveTo(tick.x, vp.y1);\r\n                    ctx.lineTo(tick.x, vp.y2);\r\n                break;\r\n            };\r\n            ctx.stroke();\r\n        })\r\n\r\n        ctx.setLineDash([]);\r\n    }\r\n\r\n\r\n}","import { Signal } from \"signals\"\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { Ticks } from \"./Ticks\";\r\nimport { Canvas } from \"./Canvas\";\r\nimport { Grid } from \"./Grid\";\r\nimport { Label } from \"./Label\";\r\nimport { Point } from \"./Point\";\r\nimport { Legend } from \"./Legend\";\r\n\r\ninterface axisOptions  {\r\n    lineWidth: number;\r\n    lineColor: string;\r\n    lineDash: number[];\r\n}\r\n\r\n//описание класса\r\n\r\nexport class Axis {\r\n\r\n    canvas: Canvas;\r\n\r\n    name?: string;\r\n    namePosition?: string;\r\n\r\n    label: Label;\r\n\r\n    display: boolean = false;\r\n    position: string = 'start'\r\n\r\n    min: number;\r\n    max: number;\r\n    type: string;\r\n    optionsDraw: axisOptions;\r\n    gridOn: boolean = false;\r\n\r\n    ticks: Ticks;\r\n    customTicks: Ticks[] = [];\r\n    legends: Legend[] = [];\r\n\r\n    grid: Grid;\r\n\r\n    onOptionsSetted: Signal;\r\n    onMinMaxSetted: Signal;\r\n    onCustomTicksAdded: Signal;\r\n    onNameSetted: Signal;\r\n    \r\n    constructor( MinMax: number[], type: string, container: HTMLElement) {\r\n        \r\n        this.onOptionsSetted = new Signal();\r\n        this.onMinMaxSetted = new Signal();\r\n        this.onCustomTicksAdded = new Signal();\r\n        this.onNameSetted = new Signal();\r\n        \r\n\r\n        this.min = 0;\r\n        this.max = 0;\r\n        this.setMinMax(MinMax);\r\n\r\n        this.type = type;\r\n\r\n        this.label = new Label(this.type);\r\n\r\n        this.canvas = new Canvas(container);\r\n        this.canvas.canvas.style.zIndex = \"2\";\r\n\r\n        this.optionsDraw = {\r\n            lineWidth: 1,\r\n            lineColor: '#000000',\r\n            lineDash: []\r\n        };\r\n\r\n        this.ticks = new Ticks(this.type);\r\n        this.grid = new Grid(this.type);\r\n\r\n        this.bindChildSignals();\r\n        this.bindSignals();\r\n    }\r\n\r\n    bindSignals() {\r\n        \r\n        this.onMinMaxSetted.add(() => {\r\n            this.createTicks();\r\n            this.draw();\r\n        })\r\n\r\n        this.onOptionsSetted.add(() => {\r\n            this.draw();\r\n        })\r\n\r\n        this.onCustomTicksAdded.add(()=>{\r\n            this.createTicks();\r\n            this.draw();\r\n        })\r\n\r\n        this.onNameSetted.add(() => {\r\n            this.draw();\r\n        })\r\n\r\n    }\r\n\r\n    bindChildSignals() {\r\n\r\n        //canvas\r\n        this.canvas.resized.add(() => {\r\n            this.createTicks(true);\r\n            this.draw();\r\n        });\r\n\r\n        this.canvas.onPaddingsSetted.add(() => {\r\n            this.createTicks();\r\n            this.draw();\r\n        });\r\n\r\n        //ticks\r\n        this.ticks.onOptionsSetted.add(() => {\r\n            this.createTicks();\r\n            this.draw();\r\n        });\r\n\r\n        this.ticks.onCustomLabelsAdded.add(() => {\r\n            this.createTicks();\r\n            this.draw();\r\n        });\r\n\r\n        this.ticks.onCoordsChanged.add(() => {\r\n            this.draw();\r\n        });\r\n\r\n        //label\r\n        this.label.onOptionsSetted.add(() => {\r\n            this.draw();\r\n        });\r\n\r\n        //ticks.labels\r\n        this.ticks.label.onOptionsSetted.add(() => {\r\n            this.draw();\r\n        });\r\n\r\n        //grid\r\n        this.grid.onOptionsSetted.add(()=>{\r\n            this.draw();\r\n        });\r\n\r\n    }\r\n\r\n    get length():number {\r\n        return Math.abs(this.max-this.min);\r\n    }\r\n\r\n    addLegend(newLegend: Legend) {\r\n        this.legends.push(newLegend);\r\n    }\r\n\r\n    setName(name:string, namePosition:string) {\r\n        this.name = name;\r\n        this.namePosition = namePosition;\r\n        return this;\r\n    }\r\n\r\n    setOptions(position?: string, lineWidth?: number, lineColor?: string, lineDash?: number[]) {\r\n        if (position) this.position = position;\r\n        if (lineWidth) this.optionsDraw.lineWidth = lineWidth;\r\n        if (lineColor) this.optionsDraw.lineColor = lineColor;\r\n        if (lineDash) this.optionsDraw.lineDash = lineDash;\r\n        this.onOptionsSetted.dispatch();\r\n    }\r\n\r\n\r\n    setMinMax(MinMax: number[], hasPlotAnimation?:boolean) {\r\n        let to:number[] = [];\r\n        let from:number[] = [];\r\n\r\n        from = [this.min, this.max];\r\n\r\n        switch (MinMax.length) {\r\n            case 0:\r\n                to = [0, 100];\r\n            break;\r\n\r\n            case 1:\r\n                to = [MinMax[0], 100];\r\n            break;\r\n\r\n            case 2:\r\n                to = [MinMax[0], MinMax[1]];\r\n            break;\r\n        }\r\n\r\n        /*\r\n        if (duration) {\r\n            this.axisRangeAnimation(from, to, duration);\r\n            return;\r\n        }\r\n        */\r\n   \r\n        this.min = to[0];\r\n        \r\n        this.max = to[1];\r\n        \r\n        this.onMinMaxSetted.dispatch(hasPlotAnimation);\r\n\r\n    }\r\n\r\n    draw() {\r\n        const ctx = this.canvas.ctx;\r\n\r\n        if (ctx) {\r\n\r\n            this.canvas.clear();\r\n            const axisVp = this.axisViewport;\r\n            \r\n            if (this.display) this.drawAxis();\r\n            \r\n            this.ticks.draw(ctx, this.canvas.viewport);\r\n            this.customTicks.forEach((ticks) => {\r\n                ticks.draw(ctx, this.canvas.viewport);\r\n            })\r\n            if (this.grid.display) this.grid.draw(ctx, this.canvas.viewport, this.ticks.coords);\r\n            \r\n            this.drawAxisName();\r\n\r\n            this.legends.forEach((legend) => {\r\n                legend.draw(ctx, this.canvas.viewport);\r\n            })\r\n        }\r\n    }\r\n\r\n    createTicks(noAnimate?: boolean) {\r\n        const ctx = this.canvas.ctx;\r\n        if (ctx) {\r\n            this.ticks.createTicks(this.min, this.max, this.axisViewport, ctx, noAnimate);\r\n            this.customTicks.forEach((ticks) => {\r\n                ticks.createTicks(this.min, this.max, this.axisViewport, ctx, noAnimate);\r\n            })\r\n        }\r\n    }\r\n\r\n    addCustomTicks(ticks: Ticks) {\r\n        ticks.onCoordsChanged.add(() => {\r\n            this.draw();\r\n        });\r\n        this.customTicks.push(ticks);\r\n        this.onCustomTicksAdded.dispatch();\r\n    }\r\n\r\n    get axisViewport(): Rectangle {\r\n        const vp: Rectangle = this.canvas.viewport;\r\n        let axisVP: Rectangle = new Rectangle(0, 0, 0, 0);\r\n        switch(this.position) {\r\n            case 'start':\r\n                switch(this.type) {\r\n                    case 'vertical':\r\n                        axisVP = new Rectangle(vp.x1, vp.y1, vp.x1, vp.y2);\r\n                    break;\r\n                  \r\n                    case 'horizontal':\r\n                        axisVP = new Rectangle(vp.x1, vp.y2, vp.x2, vp.y2);\r\n                    break;\r\n                }\r\n            break;\r\n          \r\n            case 'end':\r\n                case 'start':\r\n                    switch(this.type) {\r\n                        case 'vertical':\r\n                            axisVP = new Rectangle(vp.x2, vp.y1, vp.x2, vp.y2);\r\n                        break;\r\n                      \r\n                        case 'horizontal':\r\n                            axisVP = new Rectangle(vp.x1, vp.y1, vp.x2, vp.y1);\r\n                        break;\r\n                    }\r\n                break;\r\n            break;\r\n\r\n        }\r\n\r\n        return axisVP;\r\n    }\r\n\r\n    drawAxis() {\r\n        const ctx = this.canvas.ctx;\r\n        const viewport = this.axisViewport;\r\n\r\n        if (ctx) {\r\n            ctx.strokeStyle = this.optionsDraw.lineColor;\r\n            ctx.lineWidth = this.optionsDraw.lineWidth;\r\n            ctx.setLineDash(this.optionsDraw.lineDash);\r\n            ctx.beginPath();\r\n            ctx.moveTo(viewport.x1, viewport.y1);\r\n            ctx.lineTo(viewport.x2, viewport.y2);\r\n            ctx.stroke();\r\n            ctx.setLineDash([]);\r\n        }\r\n    }\r\n\r\n    drawAxisName() {\r\n        const ctx = this.canvas.ctx;\r\n        const viewport = this.canvas.viewport;\r\n\r\n        let xCoord = 0;\r\n        let yCoord = 0;\r\n\r\n        (this.type == 'horizontal') ? xCoord = viewport.midX : ((this.namePosition == 'start') ? xCoord = viewport.x1 : xCoord = viewport.x2); \r\n        (this.type == 'vertical') ? yCoord = viewport.midY : ((this.namePosition == 'start') ? yCoord = viewport.y2 : yCoord = viewport.y1);\r\n        \r\n        const coord = new Point(xCoord, yCoord);\r\n\r\n        if ((this.name) && (ctx)) {\r\n            this.label.draw(ctx, coord, this.name);\r\n        }\r\n    }\r\n\r\n/*\r\n    axisRangeAnimation(from: number[], to: number[], duration: number) {\r\n        \r\n        let start = performance.now();\r\n        \r\n        const animate = (time) => {\r\n            let timeFraction = (time - start) / duration;\r\n            if (timeFraction > 1) timeFraction = 1;\r\n            this.min = from[0]+(to[0] - from[0])*timeFraction;\r\n            this.max = from[1]+(to[1] - from[1])*timeFraction;\r\n            this.onMinMaxSetted.dispatch();\r\n            if (timeFraction < 1) {\r\n                requestAnimationFrame(animate);\r\n            }\r\n        }\r\n\r\n        requestAnimationFrame(animate);\r\n    }\r\n*/\r\n\r\n  }","import { Canvas } from \"./Canvas\";\r\nimport { Point } from \"./Point\";\r\n\r\nexport class BackGround {\r\n    \r\n    type: string = 'default'\r\n    canvas: Canvas;\r\n\r\n    constructor(type: string, container: HTMLElement) {\r\n        this.type = type;\r\n        this.canvas = new Canvas(container);\r\n        this.canvas.canvas.style.zIndex = \"1\";\r\n    }\r\n\r\n    draw(xCoord: Point[], yCoord: Point[]) {\r\n        this.canvas.clear();\r\n        switch (this.type) {\r\n            case 'coloredGrid_cbh':\r\n                this.drawColoredGrid(xCoord, yCoord);\r\n            break;\r\n        }\r\n\r\n    }\r\n\r\n    drawColoredGrid(xCoord: Point[], yCoord: Point[]) {\r\n        const ctx = this.canvas.ctx;\r\n        \r\n        if (ctx) {\r\n            \r\n            ctx.globalAlpha = 0.1;\r\n            const colorPalette: string[] = ['#8CCB76', '#BED68D', '#E7D180', '#CC9263', '#CF5031'];\r\n\r\n            for (let i = 0; i < xCoord.length - 1; i++) {\r\n                ctx.fillStyle = colorPalette[i];\r\n                ctx.fillRect(xCoord[i].x, yCoord[0].y, xCoord[i + 1].x - xCoord[i].x, yCoord[yCoord.length - 1].y - yCoord[0].y);\r\n            }\r\n\r\n            for (let i = 0; i < yCoord.length - 1; i++) {\r\n                ctx.fillStyle = colorPalette[i];\r\n                ctx.fillRect(xCoord[0].x, yCoord[i].y, xCoord[xCoord.length - 1].x - xCoord[0].x, yCoord[i + 1].y - yCoord[i].y);\r\n            }\r\n\r\n            ctx.globalAlpha = 1;\r\n\r\n        }\r\n    }\r\n\r\n}","import { Signal } from \"signals\"\r\nimport { Canvas } from \"../Canvas\";\r\nimport { Point } from \"../Point\";\r\nimport { Rectangle } from \"../Rectangle\";\r\nimport { Transformer } from \"../Transformer\";\r\n\r\nimport { Series } from \"../Series\";\r\n\r\n\r\nexport class SeriesBase implements Series {\r\n\r\n    id: string;\r\n    seriesData: number[][];\r\n    plotData: Point[][];\r\n    plots: string[];\r\n    hasAnimation: boolean = false;\r\n    animationDuration: number = 300;\r\n    canvas: Canvas;\r\n    extremes: number[];\r\n    \r\n\r\n    timeFunc: (time: number) => number = function (time) {\r\n        return time;\r\n      };\r\n\r\n    onPlotDataChanged: Signal;\r\n    onSeriesDataChanged: Signal;\r\n    \r\n    constructor(id: string, container: HTMLElement, seriesData: number[][]) {\r\n        this.onPlotDataChanged = new Signal();\r\n        this.onSeriesDataChanged = new Signal();\r\n        this.id = id;\r\n        this.seriesData = this.getInitialData(seriesData);\r\n        this.extremes = this.findExtremes();\r\n\r\n        this.plots = [];\r\n        this.plotData = [];\r\n        this.canvas = new Canvas(container);\r\n        this.canvas.canvas.style.zIndex = \"0\";\r\n\r\n        return this\r\n    }\r\n\r\n    bindChildSignals() {\r\n        this.canvas.resized.add(() => {\r\n\r\n        })\r\n    }\r\n\r\n\r\n    getInitialData(initialData: number[][]): number[][] {\r\n        let resultData: number[][] = []\r\n        \r\n        initialData.forEach((dataRow) => {\r\n            const ind: number[] = [];\r\n            const val: number[] = [];\r\n            dataRow.forEach((element, index) => {\r\n                ind.push(index);\r\n                val.push(element);\r\n            });\r\n            resultData.push(ind);\r\n            resultData.push(val);\r\n        })\r\n\r\n        return resultData;\r\n    }\r\n\r\n\r\n    setPlotsIds(...plotIds: string[]) {\r\n        this.plots = plotIds;       \r\n    }\r\n\r\n\r\n    findExtremes(data?:number[][]): number[] {\r\n\r\n        let seriesData:number[][] = [];\r\n\r\n        if (data) seriesData = data;\r\n        if (!data) seriesData = this.seriesData.slice();\r\n\r\n        let xMin: number = seriesData[0][0];\r\n        let xMax: number = seriesData[0][0];\r\n        let yMin: number = seriesData[1][0];\r\n        let yMax: number = seriesData[1][0];\r\n\r\n        seriesData.forEach((dataRow, ind) => {\r\n            dataRow.forEach((element) => {\r\n                switch (ind % 2) {\r\n                    case 0:\r\n                        if (element < xMin) xMin = element;\r\n                        if (element > xMax) xMax = element;\r\n                    break;\r\n\r\n                    case 1:\r\n                        if (element < yMin) yMin = element;\r\n                        if (element > yMax) yMax = element;\r\n                    break;\r\n                }\r\n            })\r\n        })\r\n        \r\n        return [xMin,xMax,yMin,yMax];\r\n    }\r\n\r\n\r\n    get dataRect(): Rectangle {\r\n        const extremes = this.extremes;\r\n        return new Rectangle(extremes[0], extremes[2], extremes[1], extremes[3]);\r\n    }\r\n\r\n\r\n    getDataRange(type:string, min:number, max:number): number[][] {\r\n        const data: number[][] = []\r\n \r\n        for (let i = 0; i < this.seriesData.length; i = i + 2) {\r\n            const ind: number[] = [];\r\n            const val: number[] = [];\r\n\r\n            let dataRowInd = this.seriesData[i].slice();\r\n            let dataRowVal = this.seriesData[i + 1].slice();\r\n            if (i == 2) {\r\n                dataRowInd = dataRowInd.slice();\r\n                dataRowVal = dataRowVal.slice();\r\n            }\r\n\r\n            dataRowInd.forEach((el,i) => {\r\n                if ((el >= min) && (el <= max)) {\r\n                    ind.push(dataRowInd[i]);\r\n                    val.push(dataRowVal[i]);\r\n                }\r\n            });\r\n\r\n            data.push(ind);\r\n            data.push(val);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n\r\n    replaceSeriesData(seriesData_to: number[][], animate: boolean) {\r\n        this.seriesData = this.getInitialData(seriesData_to);\r\n        this.extremes = this.findExtremes();\r\n        if (animate) this.onSeriesDataChanged.dispatch(this);\r\n    }\r\n\r\n    \r\n    getClosestDataPointX(seriesPoint: Point): [Point, number] {\r\n        let ind = 0;\r\n        const resultPoint =  this.seriesData[0].reduce((prev, curr, i) => {\r\n            let curPoint = new Point(curr, this.seriesData[1][i])\r\n            const curDif = seriesPoint.findDistX(curPoint);\r\n            const prevDif = seriesPoint.findDistX(prev);\r\n            if (curDif < prevDif) {\r\n                ind = i;\r\n                return curPoint\r\n            }\r\n            return prev\r\n              }, new Point(this.seriesData[0][0], this.seriesData[1][0]));\r\n        return [resultPoint, ind];\r\n    }\r\n\r\n    getClosestDataPointXY(seriesPoint: Point): [Point, number] {\r\n        let ind = 0;\r\n        const resultPoint =  this.seriesData[0].reduce((prev, curr, i) => {\r\n            let curPoint = new Point(curr, this.seriesData[1][i])\r\n            const curDif = seriesPoint.findDist(curPoint);\r\n            const prevDif = seriesPoint.findDist(prev);\r\n            if (curDif < prevDif) {\r\n                ind = i;\r\n                return curPoint\r\n            }\r\n            return prev\r\n              }, new Point(this.seriesData[0][0], this.seriesData[1][0]));\r\n        return [resultPoint, ind];\r\n    }\r\n\r\n    getClosestPlotPointX(coordPoint: Point): Point {\r\n        const coord =  this.plotDataArr.reduce((prev, curr, i) => {\r\n            const curDif = coordPoint.findDistX(curr);\r\n            const prevDif = coordPoint.findDistX(prev);\r\n            if (curDif < prevDif) return curr\r\n            return prev\r\n              }, this.plotDataArr[0]);\r\n\r\n        if (!coord) {\r\n            //console.log(coordPoint, this.plotDataArr, this.plotData, this.seriesData);\r\n            return new Point(0, 0);\r\n        }\r\n        return new Point(coord.x, coord.y);\r\n    }\r\n\r\n    getClosestPlotPointXY(coordPoint: Point): Point {\r\n        const coord = this.plotDataArr.reduce((prev, curr, i) => {\r\n            const curDif = coordPoint.findDist(curr);\r\n            const prevDif = coordPoint.findDist(prev);\r\n            if (curDif < prevDif) return curr\r\n            return prev\r\n        }, this.plotDataArr[0]);\r\n        if (!coord) {\r\n            //console.log(coordPoint, this.plotDataArr, this.plotData, this.seriesData);\r\n            return new Point(0, 0);\r\n        }\r\n        return new Point(coord.x, coord.y);\r\n    }\r\n\r\n    get plotDataArr(): Point[] {\r\n\r\n        const lineArr: Point[] = [];\r\n\r\n        for (let i = 0; i < this.plotData.length; i++) {\r\n            let plotRow = this.plotData[i];\r\n            if (i == 1) {\r\n                plotRow = plotRow.slice().reverse();\r\n            }\r\n            plotRow.forEach((element) => {\r\n                lineArr.push(element);\r\n            });\r\n        }\r\n\r\n        return lineArr;\r\n    }\r\n\r\n    updatePlotData(axisRect: Rectangle, vp: Rectangle, noAnimation?: boolean) {\r\n        \r\n        const plotData = this.generatePlotData(axisRect, vp);\r\n        \r\n        if (plotData[0].length === 0) {\r\n            noAnimation = true;\r\n        }\r\n\r\n        if (this.plotData.length === 0) {\r\n            noAnimation = true;\r\n        } else\r\n            if (this.plotData[0].length === 0) {\r\n                noAnimation = true;\r\n            }\r\n        \r\n        //если нужна анимация графиков\r\n        if (noAnimation) {\r\n            this.plotData = plotData;\r\n            this.onPlotDataChanged.dispatch(this);\r\n            return this;\r\n        }\r\n        \r\n\r\n        if (this.hasAnimation) {\r\n\r\n            const fromData: Point[][] = []\r\n            const toData: Point[][] = []\r\n\r\n            for (let i = 0; i < this.plotData.length; i++) {\r\n                let plotRow = this.plotData[i];\r\n                let fromTo = this.makeFromPointArr(plotRow.slice(), plotData[i].slice());\r\n                fromData.push(fromTo[0]);\r\n                toData.push(fromTo[1]);\r\n            }\r\n\r\n            this.сoordAnimation(fromData, toData, this.animationDuration, plotData);\r\n\r\n        }\r\n\r\n       \r\n        this.plotData = plotData;\r\n        this.onPlotDataChanged.dispatch(this);\r\n        return this;\r\n    }\r\n\r\n\r\n    generatePlotData(axisRect: Rectangle, vp: Rectangle): Point[][] {\r\n\r\n        const seriesData = this.getDataRange('ind', axisRect.x1, axisRect.x2)\r\n       // const seriesData = this.seriesData.slice();\r\n\r\n        let plotData: Point[][] = [];\r\n\r\n        const transformer = new Transformer();\r\n\r\n        for (let i = 0; i < seriesData.length; i = i + 2) {\r\n\r\n            let plotDataRow: Point[] = []\r\n\r\n            let dataRowInd = seriesData[i];\r\n            let dataRowVal = seriesData[i + 1];\r\n\r\n            dataRowInd.forEach((element, ind) => {\r\n                const seriesPoint = new Point(dataRowInd[ind], dataRowVal[ind]);\r\n                const plotPoint = transformer.getVeiwportCoord(axisRect, vp, seriesPoint);\r\n                plotDataRow.push(new Point(Math.round(plotPoint.x), Math.round(plotPoint.y)));\r\n            });\r\n\r\n            plotData.push(plotDataRow);\r\n\r\n        }\r\n\r\n        return plotData;\r\n \r\n    }\r\n\r\n\r\n    // Метод анимации изменение набора координат\r\n    сoordAnimation(fromData: Point[][], toData:Point[][], duration: number, finalData:Point[][]) {\r\n\r\n        let start = performance.now();\r\n\r\n        \r\n        \r\n        const animate = (time: number) => {\r\n\r\n            let tekTime = (time - start) / duration\r\n            let timeFraction = this.timeFunc(tekTime);\r\n\r\n            if (tekTime > 1) tekTime = 1;\r\n\r\n            let tekData: Point[][] = [];\r\n\r\n            fromData.forEach((fromRow, ind)=> {\r\n                const tekRow = fromRow.map((el, i) => {\r\n                    return new Point(Math.round(fromRow[i].x + (toData[ind][i].x - fromRow[i].x) * timeFraction), Math.round(fromRow[i].y + (toData[ind][i].y - fromRow[i].y) * timeFraction) );\r\n                });\r\n                tekData.push(tekRow);\r\n            })\r\n\r\n            \r\n            this.plotData = tekData;\r\n\r\n            this.onPlotDataChanged.dispatch(this);\r\n\r\n            if (tekTime < 1) {\r\n                requestAnimationFrame(animate);\r\n            } else {\r\n                this.plotData = finalData;\r\n                this.onPlotDataChanged.dispatch(this);\r\n            }\r\n\r\n        }\r\n\r\n        requestAnimationFrame(animate);\r\n\r\n    }\r\n\r\n\r\n    makeFromPointArr(from: Point[], to: Point[]): Point[][] {\r\n        const resultArr: Point[][] = [];\r\n\r\n        if (from.length == 0) return resultArr;\r\n\r\n        const fromResult: Point[] = [];\r\n        const toResult: Point[] = [];\r\n\r\n        const toArr = to.slice();\r\n        const fromArr = from.slice();\r\n\r\n    // если from < to\r\n        if (fromArr.length < toArr.length) {\r\n\r\n         \r\n            const capacity = Math.floor(toArr.length/fromArr.length);\r\n            let fromInd = 0;\r\n            let roomCount = 0;\r\n\r\n            while (fromInd < fromArr.length) {\r\n                fromResult.push(fromArr[fromInd]);\r\n                toArr.shift();\r\n                roomCount = roomCount + 1;\r\n                if (roomCount == capacity) {\r\n                    fromInd = fromInd + 1;\r\n                    roomCount = 0;\r\n                }\r\n            }\r\n        \r\n            while (toArr.length !== 0) {\r\n                fromResult.push(fromArr[fromArr.length-1]);\r\n                toArr.shift();\r\n            }\r\n        \r\n            resultArr.push(fromResult);\r\n            resultArr.push(to);\r\n            \r\n            return resultArr;\r\n        }\r\n    \r\n    // если from > to\r\n        else {\r\n\r\n            const capacity = Math.floor(fromArr.length / toArr.length);\r\n            let toInd = 0;\r\n            let roomCount = 0;\r\n\r\n            while (toInd < toArr.length) {\r\n                toResult.push(toArr[toInd]);\r\n                fromArr.shift();\r\n                roomCount = roomCount + 1;\r\n                if (roomCount == capacity) {\r\n                    toInd = toInd + 1;\r\n                    roomCount = 0;\r\n                }\r\n            }\r\n        \r\n            while (fromArr.length !== 0) {\r\n                toResult.push(toArr[toArr.length-1]);\r\n                fromArr.shift();\r\n            }\r\n        \r\n            resultArr.push(from);\r\n            resultArr.push(toResult);\r\n            \r\n            return resultArr;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n  \r\n  ","import { Series } from \"../Series\";\r\nimport { Rectangle } from \"../Rectangle\";\r\nimport { Point } from \"../Point\";\r\nimport { Transformer } from \"../Transformer\";\r\nimport { SeriesBase } from \"./SeriesBase\";\r\n\r\nexport class SeriesXY extends SeriesBase implements Series {\r\n\r\n    plotLabels: string[] = [];\r\n    labels?: string[];\r\n\r\n    constructor(id: string, container: HTMLElement, seriesData: number[][], labels?: string[]) {\r\n        super(id, container, seriesData);\r\n        this.canvas.canvas.style.zIndex = \"3\";\r\n        if (labels) this.labels = labels; \r\n    }\r\n\r\n    getInitialData(initialData: number[][]): number[][] {\r\n        let resultData: number[][] = []\r\n\r\n        const x: number[] = [];\r\n        const y: number[] = [];\r\n\r\n        initialData[0].forEach((element, index) => {\r\n            x.push(element);\r\n            y.push(initialData[1][index]);\r\n        });\r\n\r\n        resultData.push(x);\r\n        resultData.push(y);\r\n\r\n        return resultData;\r\n    }\r\n\r\n    generatePlotData(axisRect: Rectangle, vp: Rectangle): Point[][] {\r\n\r\n        const seriesData = this.getDataRange('ind', axisRect.x1, axisRect.x2)\r\n       // const seriesData = this.seriesData.slice();\r\n\r\n        let plotData: Point[][] = [];\r\n\r\n        const transformer = new Transformer();\r\n\r\n        let plotDataRow: Point[] = []\r\n\r\n        let dataRowX = seriesData[0];\r\n        let dataRowY = seriesData[1];\r\n\r\n        dataRowX.forEach((element, ind) => {\r\n            const seriesPoint = new Point(dataRowX[ind], dataRowY[ind]);\r\n            const plotPoint = transformer.getVeiwportCoord(axisRect, vp, seriesPoint);\r\n            plotDataRow.push(new Point(Math.round(plotPoint.x), Math.round(plotPoint.y)));\r\n        });\r\n\r\n        plotData.push(plotDataRow);\r\n\r\n        return plotData;\r\n \r\n    }\r\n\r\n    getDataRange(type:string, min:number, max:number): number[][] {\r\n        const data: number[][] = []\r\n        this.plotLabels.splice(0,this.plotLabels.length);\r\n \r\n        const x: number[] = [];\r\n        const y: number[] = [];\r\n\r\n        let dataRowX = this.seriesData[0].slice();\r\n        let dataRowY = this.seriesData[1].slice();\r\n\r\n        dataRowX.forEach((el,i) => {\r\n            if ((el >= min) && (el <= max)) {\r\n                x.push(dataRowX[i]);\r\n                y.push(dataRowY[i]);\r\n                if (this.labels) this.plotLabels.push(this.labels[i]);\r\n            }\r\n        });\r\n\r\n        data.push(x);\r\n        data.push(y);\r\n\r\n        return data;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n","import { Canvas } from \"./Canvas\";\r\nimport { Data } from \"./Data\";\r\nimport { Plot } from \"./Plot\";\r\nimport { Axis } from \"./Axis\";\r\nimport { Transformer } from \"./Transformer\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { Point } from \"./Point\";\r\nimport { Series } from \"./Series\";\r\nimport { BackGround } from \"./BackGround\";\r\nimport { Signal } from \"signals\";\r\nimport { SeriesBase } from \"./series/SeriesBase\";\r\nimport { SeriesXY } from \"./series/SeriesXY\";\r\n\r\nexport class Chart {\r\n\r\n    container: HTMLElement\r\n    canvasTT: Canvas;\r\n    data: Data;\r\n    plots: Plot[]; \r\n    xAxis: Axis;\r\n    yAxis: Axis;\r\n    hasBorder: boolean = false;\r\n    clipSeriesCanvas: boolean = false;\r\n    background?: BackGround;\r\n    \r\n\r\n    tooltipsDataIndexUpdated: Signal;\r\n\r\n    constructor(container: HTMLElement, xMinMax: number[], yMinMax: number[]) {\r\n        //signals\r\n        this.tooltipsDataIndexUpdated = new Signal();\r\n        this.container = container;\r\n        \r\n        this.canvasTT = new Canvas(container);\r\n        this.canvasTT.turnOnListenres();\r\n        this.canvasTT.canvas.style.zIndex = \"4\";\r\n\r\n        this.data = new Data();\r\n        this.plots = [];\r\n\r\n        this.xAxis = new Axis(xMinMax, 'horizontal', container);\r\n        this.yAxis = new Axis(yMinMax, 'vertical', container);\r\n\r\n        //bind\r\n        this.tooltipsDraw = this.tooltipsDraw.bind(this);\r\n        this.seriesReDraw = this.seriesReDraw.bind(this);    \r\n\r\n        //call methods\r\n        this.bindChildSignals();\r\n        this.tooltipsDraw(true);\r\n    }\r\n\r\n\r\n    switchResolution() {\r\n        this.xAxis.canvas.squareRes = true;\r\n        this.yAxis.canvas.squareRes = true;\r\n        this.canvasTT.squareRes = true;\r\n\r\n        if (this.background) this.background.canvas.squareRes = true;\r\n\r\n        this.data.seriesStorage.forEach((series, ind) => {\r\n            series.canvas.squareRes = true;\r\n        });\r\n\r\n    }\r\n\r\n\r\n    bindChildSignals() {\r\n        \r\n        //min max\r\n        this.xAxis.onMinMaxSetted.add((hasPlotAnimation) => {\r\n            // @ts-ignore\r\n            //this.xAxis.createTicks(this.xAxis.min, this.xAxis.max, this.xAxis.getaxisViewport(this.canvasA.viewport), this.canvasA.ctx);\r\n            if (hasPlotAnimation) this.seriesUpdatePlotData();\r\n            this.tooltipsDraw(true);\r\n        });\r\n\r\n        //min max\r\n        this.yAxis.onMinMaxSetted.add((hasPlotAnimation) => {\r\n            //this.yAxis.createTicks(this.yAxis.min, this.yAxis.max, this.yAxis.getaxisViewport(this.canvasA.viewport), this.canvasA.ctx);\r\n            if (hasPlotAnimation) this.seriesUpdatePlotData();\r\n            this.tooltipsDraw(true);\r\n        });\r\n        // canvas\r\n\r\n        this.canvasTT.mouseMoved.add(this.tooltipsDraw);\r\n        this.canvasTT.mouseOuted.add(() => {\r\n            this.tooltipsDraw(true);\r\n        });\r\n        this.canvasTT.touchEnded.add(() => {\r\n            this.tooltipsDraw(true);\r\n        });\r\n\r\n    }\r\n\r\n    get axisRect(): Rectangle {\r\n        return (new Rectangle(this.xAxis.min, this.yAxis.min, this.xAxis.max, this.yAxis.max))\r\n    }\r\n\r\n\r\n\r\n    // генерируем PlotData у series\r\n    seriesUpdatePlotData() {\r\n        this.data.seriesStorage.forEach((series, ind) => {\r\n            series.updatePlotData(this.axisRect, series.canvas.viewport);\r\n        })\r\n    }\r\n\r\n\r\n    // отрисовка одной серии\r\n    seriesReDraw(series: Series) {\r\n            const canvas = series.canvas;\r\n            canvas.clear();\r\n            if (this.clipSeriesCanvas) canvas.clipCanvas();\r\n\r\n            series.plots.forEach((plotId) => {\r\n                const plot: Plot | null = this.findPlotById(plotId);\r\n                if (plot) {\r\n                    // @ts-ignore\r\n                    plot.drawPlot(canvas.ctx, series.plotDataArr, canvas.viewport, series.plotLabels);\r\n                };\r\n            })   \r\n        this.tooltipsDraw(true);\r\n    }\r\n\r\n    setCanvasPaddings(...paddings: number[]) {\r\n        this.canvasTT.setPaddings(...paddings);\r\n        this.xAxis.canvas.setPaddings(...paddings);\r\n        this.yAxis.canvas.setPaddings(...paddings);\r\n\r\n        if (this.background) this.background.canvas.setPaddings(...paddings);\r\n\r\n        this.data.seriesStorage.forEach((series, ind) => {\r\n            series.canvas.setPaddings(...paddings);\r\n        })\r\n    }\r\n\r\n\r\n    addBackGround(type: string) {\r\n        this.background = new BackGround(type, this.container);\r\n        //ticks\r\n        this.xAxis.ticks.onCoordsChanged.add(() => {\r\n            this.backgroundDraw();\r\n        });\r\n\r\n        this.yAxis.ticks.onCoordsChanged.add(() => {\r\n            this.backgroundDraw();\r\n        });\r\n\r\n        this.background.canvas.resized.add(() => {\r\n            this.backgroundDraw();\r\n        })\r\n\r\n        this.backgroundDraw();\r\n    }\r\n\r\n    backgroundDraw() {\r\n        if (this.background) this.background.draw(this.xAxis.ticks.coords, this.yAxis.ticks.coords)\r\n    }\r\n\r\n\r\n    addPlot(id: string, type: string, ...options: any) {\r\n        const plot = new Plot(id, type, ...options);\r\n        this.plots.push(plot);\r\n        return plot;\r\n    }\r\n\r\n\r\n    findPlotById(id: string): Plot | null {\r\n        const plots: Plot[] = this.plots.filter((plot) => {\r\n            return plot.id === id\r\n        });\r\n        if (plots.length !== 0) return plots[0];\r\n        return null;\r\n    }\r\n\r\n\r\n    addSeries(id: string, seriesData: number[][], labels?:string[]) {\r\n        const newSeries: Series = new SeriesXY(id, this.container, seriesData, labels);\r\n        this.data.seriesStorage.push(newSeries);\r\n        newSeries.canvas.setPaddings(this.canvasTT.top, this.canvasTT.right, this.canvasTT.bottom, this.canvasTT.left);\r\n        newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        newSeries.onPlotDataChanged.add( this.seriesReDraw );\r\n        newSeries.onSeriesDataChanged.add((series) => {\r\n            series.updatePlotData(this.axisRect, series.canvas.viewport);\r\n        });\r\n        newSeries.canvas.resized.add(() => {\r\n            newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        })\r\n\r\n        newSeries.canvas.onPaddingsSetted.add(() => {\r\n            newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        })\r\n        return newSeries;\r\n    }\r\n\r\n    addSeriesRow(id: string, seriesData: number[][]) {\r\n        const newSeries: Series = new SeriesBase(id, this.container, seriesData);\r\n\r\n        this.data.seriesStorage.push(newSeries);\r\n        newSeries.canvas.setPaddings(this.canvasTT.top, this.canvasTT.right, this.canvasTT.bottom, this.canvasTT.left);\r\n        newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        newSeries.onPlotDataChanged.add( this.seriesReDraw );\r\n\r\n        newSeries.onSeriesDataChanged.add((series) => {\r\n            series.updatePlotData(this.axisRect, series.canvas.viewport);\r\n        });\r\n        newSeries.canvas.resized.add(() => {\r\n            newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        })\r\n\r\n        newSeries.canvas.onPaddingsSetted.add(() => {\r\n            newSeries.updatePlotData(this.axisRect, newSeries.canvas.viewport, true);\r\n        })\r\n\r\n        return newSeries;\r\n    }\r\n\r\n    switchDataAnimation(hasAnimation: boolean, duration?: number) {\r\n        this.data.seriesStorage.forEach((series, ind) => {\r\n            series.hasAnimation = hasAnimation;\r\n            if (duration) series.animationDuration = duration;\r\n        })\r\n    }\r\n\r\n\r\n    // отрисовываем тултипы\r\n    tooltipsDraw(drawLast?: boolean) {\r\n        this.canvasTT.clear();\r\n\r\n        const mouseXY = this.canvasTT.mouseCoords;\r\n\r\n        const transformer = new Transformer();\r\n\r\n        let delta_abs_buf: Point[] = [];\r\n        let delta_abs_buf_coord: Point[] = [];\r\n        // @ts-ignore\r\n        let data_y_end_buf = [];\r\n\r\n        this.data.seriesStorage.forEach((series) => {\r\n\r\n            const seriesX = this.xAxis.min + mouseXY.x * (this.xAxis.length) / this.canvasTT.viewport.width;\r\n            const seriesY = this.yAxis.max - mouseXY.y * (this.yAxis.length) / this.canvasTT.viewport.height;\r\n            const sriesP = new Point(seriesX, seriesY);\r\n            \r\n            const [pointData, tt_ind] = series.getClosestDataPointX(sriesP);\r\n            const [pointDataXY, tt_ind_XY] = series.getClosestDataPointXY(sriesP);\r\n            const tooltipCoordX = series.getClosestPlotPointX(new Point(mouseXY.x+this.canvasTT.left, mouseXY.y+this.canvasTT.top));\r\n            const tooltipCoordXY = series.getClosestPlotPointXY(new Point(mouseXY.x+this.canvasTT.left, mouseXY.y+this.canvasTT.top));\r\n\r\n            this.tooltipsDataIndexUpdated.dispatch(pointData.x);\r\n            const tooltipCoord = transformer.getVeiwportCoord(this.axisRect, this.canvasTT.viewport, pointData);\r\n\r\n            series.plots.forEach((plotId) => {\r\n                const plot: Plot | null = this.findPlotById(plotId);\r\n                if (plot) {\r\n                    plot.tooltips.forEach((tooltip) => {\r\n\r\n                        if (drawLast) {\r\n\r\n                            switch (tooltip.type) {\r\n\r\n                                case 'data_y_end':\r\n                                    data_y_end_buf.push([tooltip, tooltipCoordX, pointData]);\r\n                                    break;\r\n\r\n                                case 'circle_series':\r\n                                    // @ts-ignore\r\n                                    tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, new Point(tooltipCoordX.x, tooltipCoordX.y), pointData);\r\n                                    break;\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            switch (tooltip.type) {\r\n\r\n                                case 'delta_abs':\r\n                                    if (delta_abs_buf.length == 0) {\r\n                                        delta_abs_buf.push(pointData);\r\n                                        delta_abs_buf_coord.push(tooltipCoordX);\r\n                                    } else {\r\n                                        const ttCoord: Point = (delta_abs_buf_coord[0].y < tooltipCoordX.y) ? delta_abs_buf_coord[0] : tooltipCoordX;\r\n                                        const absData = new Point(Math.abs(pointData.x - delta_abs_buf[0].x), Math.abs(pointData.y - delta_abs_buf[0].y));\r\n                                        // @ts-ignore\r\n                                        tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, ttCoord, absData);\r\n                                        delta_abs_buf.pop();\r\n                                        delta_abs_buf_coord.pop();\r\n                                    }\r\n                                    break;\r\n\r\n                                case 'data_y_end':\r\n                                    data_y_end_buf.push([tooltip, tooltipCoordX, pointData]);\r\n                                    break;\r\n\r\n                                case 'label_x_start':\r\n                                    // @ts-ignore\r\n                                    tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, new Point(tooltipCoordX.x, tooltipCoordX.y), pointData, tt_ind);\r\n                                    break;\r\n\r\n                                case 'line_vertical_full':\r\n                                    // @ts-ignore\r\n                                    tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, new Point(tooltipCoordX.x, tooltipCoordX.y), pointData);\r\n                                    break;\r\n\r\n                                case 'data_label':\r\n                                    // @ts-ignore\r\n                                    tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, new Point(tooltipCoordXY.x, tooltipCoordXY.y), pointDataXY, tt_ind_XY);\r\n                                    // @ts-ignore\r\n                                    if (plot.type == 'unicode') plot.drawPlot(this.canvasTT.ctx, [tooltipCoordXY], this.canvasTT.viewport, '', true);\r\n                                    break;\r\n\r\n                                default:\r\n                                    // @ts-ignore\r\n                                    tooltip.drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, new Point(tooltipCoordX.x, tooltipCoordX.y), pointData);\r\n\r\n                                    break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    })\r\n                };\r\n            })\r\n        })\r\n\r\n        // рассталкиваем друг от друга боковые тултипы\r\n        // @ts-ignore\r\n        data_y_end_buf.sort((a, b) => a[1].y - b[1].y);\r\n\r\n        for (let i = 0; i < data_y_end_buf.length - 1; i++) {\r\n            // @ts-ignore\r\n            const rect1 = data_y_end_buf[i][0].drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, data_y_end_buf[i][1], data_y_end_buf[i][2], 0, false);\r\n            // @ts-ignore\r\n            const rect2 = data_y_end_buf[i + 1][0].drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, data_y_end_buf[i + 1][1], data_y_end_buf[i + 1][2], 0, false);\r\n\r\n            if (rect1.y2 > rect2.y1) {\r\n\r\n                const abs = Math.abs(rect1.y2 - rect2.y1);\r\n\r\n                let abs1 = -abs * 0.5;\r\n                let abs2 = abs * 0.5;\r\n\r\n                if (Math.abs(rect1.y1 - this.canvasTT.viewport.y1) < Math.abs(abs1)) {\r\n                    abs1 = -Math.abs(rect1.y1 - this.canvasTT.viewport.y1);\r\n                    abs2 = (abs + abs1);\r\n                }\r\n\r\n                if (Math.abs(rect2.y2 - this.canvasTT.viewport.y2) < abs2) {\r\n                    abs2 = -Math.abs(rect1.y2 - this.canvasTT.viewport.y2);\r\n                    abs1 = -(abs - abs2);\r\n                }\r\n                // @ts-ignore\r\n                data_y_end_buf[i][1].y = data_y_end_buf[i][1].y + abs1;\r\n                // @ts-ignore\r\n                data_y_end_buf[i + 1][1].y = data_y_end_buf[i + 1][1].y + abs2;\r\n            }\r\n        }\r\n// @ts-ignore\r\n        data_y_end_buf.forEach((ttRow) => {\r\n            ttRow[0].drawTooltip(this.canvasTT.ctx, this.canvasTT.viewport, ttRow[1], ttRow[2], 0, true);\r\n        })\r\n    }\r\n\r\n\r\n}","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import { Chart } from \"../classes/Chart\"\r\nimport { Ticks } from \"../classes/Ticks\"\r\n\r\nexport let chart: Chart;\r\nlet cbhRow: number[] = [];\r\nlet xLabels: Date[] = [];\r\nlet zeroSeries: number[] = [];\r\n\r\nlet seriesLabeled: number[][];\r\nlet seriesText: string[]\r\nconst gapY: number = 0.08;\r\n\r\nconst bezier = require('bezier-easing');\r\nconst easing = bezier(0.65, 0, 0.35, 1);\r\n\r\n// @ts-ignore\r\nexport function createChart(container, data) {\r\n\r\n  // @ts-ignore\r\n  chart = new Chart(container, [0, 900], [0, 2000]);\r\n\r\n  [xLabels, cbhRow, zeroSeries, seriesLabeled, seriesText] = [...data];\r\n\r\n  // ось X\r\n  chart.xAxis.setOptions('start', 0.5, 'black');\r\n  chart.xAxis.display = true;\r\n  chart.xAxis.ticks.display = true;\r\n  // @ts-ignore\r\n  chart.xAxis.ticks.setCustomLabels(xLabels);\r\n  chart.xAxis.ticks.setOptions(true, 'customDateTicks', ['half month', '5m', '3m', '2m', '1m', 'only year']);\r\n  chart.xAxis.ticks.settickDrawOptions(-6, 0.5, 'black');\r\n  chart.xAxis.ticks.label.setOptions(true, '#B2B2B2', 'bottom', 11, ['12', '\"Transcript Pro\"'])\r\n  chart.xAxis.ticks.label.isUpperCase = true;\r\n  chart.xAxis.grid.setOptions(true, '#B2B2B2', 1, [1, 2]);\r\n\r\n  // ось Y\r\n  chart.yAxis.setOptions('end', 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.display = true;\r\n  chart.yAxis.position = 'end';\r\n  chart.yAxis.ticks.setOptions(true, 'niceCbhStep', [1, 5, 10, 15, 20, 25, 30]);\r\n  chart.yAxis.ticks.settickDrawOptions(-50, 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.ticks.label.setOptions(true, '#B2B2B2', 'right', 0, ['12', '\"Transcript Pro\"']);\r\n  chart.yAxis.ticks.label.setOffset(30, 10);\r\n  chart.yAxis.ticks.label.units = '%';\r\n  chart.yAxis.grid.setOptions(true, '#B2B2B2', 1, [1, 2]);\r\n\r\n  //добавляем custom ticks для Y\r\n  const zeroTick = new Ticks(chart.yAxis.type);\r\n  zeroTick.setOptions(true, 'zero');\r\n  zeroTick.settickDrawOptions(-50, 1, '#000000', [2, 1]);\r\n  zeroTick.label.display = false;\r\n  zeroTick.hasAnimation = true;\r\n  zeroTick.timeFunc = easing;\r\n  chart.yAxis.addCustomTicks(zeroTick);\r\n\r\n  const minTick = new Ticks(chart.yAxis.type);\r\n  minTick.setOptions(true, 'min');\r\n  minTick.settickDrawOptions(-50, 0.5, 'black', []);\r\n  minTick.label.display = false;\r\n  chart.yAxis.addCustomTicks(minTick);\r\n\r\n  // создаем Plots\r\n  chart.addPlot('black_line', 'line', 1, '#000000', []); //черная линия\r\n  chart.addPlot('light_gray_area', 'area_bottom', 0, '#F2F2F2', '#F2F2F2', 0); //серая заливка области\r\n  chart.addPlot('zero_line', 'line', 1, '#000000', [2, 1]); //пунктирная линия 0\r\n  chart.addPlot('labeled', 'text', 1, '#000000', '#000000') //график с лейблами\r\n    .label.setOptions(true, 'black', 'top', 10+15+10, ['18', '\"Transcript Pro\"', true, 11, 320])\r\n    .setOutline({ width: 5, color: 'white' })\r\n\r\n  let seriesRow = calculateDeviationsVal(cbhRow, cbhRow[0]);\r\n  let seriesL = [seriesLabeled[0], calculateDeviationsVal(seriesLabeled[1], cbhRow[0])];\r\n\r\n  // создаем Series и привязвыаем к ним инструменты отрисовки Plots\r\n  chart.addSeriesRow('cyberHedge_area', [seriesRow]).setPlotsIds('light_gray_area');\r\n  chart.addSeriesRow('cyberHedge_line', [seriesRow]).setPlotsIds('black_line');\r\n  chart.addSeriesRow('zero_line', [zeroSeries]).setPlotsIds('zero_line');\r\n  chart.addSeries('cyberHedge_labels', seriesL, seriesText).setPlotsIds('labeled');\r\n\r\n  // настраиваем Min Max осей\r\n  chart.xAxis.setMinMax(chart.data.findExtremes('val'), false); //по экстремумам оси X\r\n  chart.yAxis.setMinMax(chart.data.findExtremes('ind', chart.xAxis.min, chart.xAxis.max), false); //scale to fit по Y\r\n  chart.yAxis.setMinMax([chart.yAxis.min - gapY * chart.yAxis.length, chart.yAxis.max + gapY * chart.yAxis.length], false); //добавляем по отступам как на сайте\r\n\r\n\r\n  //включаем анимацию\r\n  chart.xAxis.ticks.switchAnimation(true, 300);\r\n  chart.yAxis.ticks.switchAnimation(true, 300);\r\n  chart.switchDataAnimation(true, 300);\r\n  chart.data.changeAllSeriesAnimationTimeFunction(easing);\r\n  chart.setCanvasPaddings(25, 80, 40, 20); // задаем отступы для области отрисовки\r\n\r\n}\r\n\r\n\r\n// преобразование данных ряда из абсолютных величин в % относительно zeroPoint\r\nfunction calculateDeviationsVal(rowData: number[], zeroPoint: number) {\r\n  let chartDataVariation = [];\r\n  chartDataVariation = [];\r\n  for (let j = 0, m = rowData.length; j < m; j++) {\r\n    chartDataVariation.push(100 * (rowData[j] - zeroPoint) / zeroPoint);\r\n  }\r\n  return chartDataVariation;\r\n}\r\n\r\n\r\n// подключение слушателей к разметке как на cbh\r\n\r\n\r\n//функция вешает слушатели на панель ranges\r\n(function prepareRangesMenu() {\r\n  let ranges = document.querySelectorAll('.ranges_black li');\r\n  ranges.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      // @ts-ignore\r\n      document.querySelector('.ranges_black li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n      const lastLb = xLabels[xLabels.length - 1];\r\n      let maxDate = lastLb,\r\n        minDate,\r\n        max = xLabels.length - 1,\r\n        min = 0;\r\n\r\n      switch (item.innerHTML) {\r\n        case '6M':\r\n          minDate = new Date(new Date(maxDate.getTime()).setMonth(maxDate.getMonth() - 6));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '1Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 1));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '2Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 2));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case 'YTD':\r\n          minDate = new Date(new Date(maxDate.getFullYear(), 0, 1).getTime()),\r\n            min = findDateInd(minDate);\r\n          break;\r\n\r\n      }\r\n\r\n      reorganizeChart(cbhRow, min, max, true);\r\n\r\n    });\r\n  })\r\n\r\n}());\r\n\r\n\r\n\r\n// настройка Chart\r\n// @ts-ignore\r\nfunction reorganizeChart(cbhRow, min, max, onlyData?: boolean) {\r\n\r\n  let seriesRow = calculateDeviationsVal(cbhRow, cbhRow[min]);\r\n  let seriesL = [seriesLabeled[0], calculateDeviationsVal(seriesLabeled[1], cbhRow[min])];\r\n\r\n  // создаем Series\r\n  chart.data.findSeriesById('cyberHedge_area')?.replaceSeriesData([seriesRow], false);\r\n  chart.data.findSeriesById('cyberHedge_line')?.replaceSeriesData([seriesRow], false);\r\n  chart.data.findSeriesById('zero_line')?.replaceSeriesData([zeroSeries], false);\r\n  chart.data.findSeriesById('cyberHedge_labels')?.replaceSeriesData(seriesL, false);\r\n\r\n  if (onlyData) {\r\n    // @ts-ignore\r\n    chart.xAxis.ticks.setCustomLabels(xLabels);\r\n    chart.xAxis.setMinMax([min, max], false);\r\n    const MinMaxY = chart.data.findExtremes('ind', min, max);\r\n    const lengthY = Math.abs(MinMaxY[0] - MinMaxY[1]);\r\n    chart.yAxis.setMinMax([MinMaxY[0] - gapY * lengthY, MinMaxY[1] + gapY * lengthY], true);\r\n  }\r\n}\r\n\r\n\r\n\r\n//поиск индекса ближайщей даты\r\nfunction findDateInd(date: Date) {\r\n  const ind = xLabels.reduce((prev, curr, i) => {\r\n    // @ts-ignore\r\n    const curDif = Math.abs(curr - date);\r\n    // @ts-ignore\r\n    const prevDif = Math.abs(xLabels[prev] - date);\r\n    if (curDif < prevDif) return i\r\n    return prev\r\n  }, 0);\r\n  return ind;\r\n}\r\n\r\n","import { Chart } from \"../classes/Chart\";\r\nimport { Ticks } from \"../classes/Ticks\";\r\nimport { customLoadDataFromCsv, csvToCols } from \"../scripts/helpers\";\r\n\r\nexport let chart: Chart;\r\nlet cbh1: number[] = [];\r\nlet cbh5: number[] = [];\r\nlet xLabels: Date[] = [];\r\nlet zeroSeries: number[] = [];\r\nconst gapY: number = 0.08;\r\n\r\nconst bezier = require('bezier-easing');\r\nconst easing = bezier(0.65, 0, 0.35, 1);\r\n\r\n// @ts-ignore\r\nexport function createChart(container, data) {\r\n  // @ts-ignore\r\n  chart = new Chart(container, [0, 900], [0, 2000]);\r\n\r\n  [xLabels, cbh5, cbh1, zeroSeries] = [...data];\r\n\r\n  setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n  chart.tooltipsDataIndexUpdated.add(conncetRedWidget);\r\n  chart.tooltipsDataIndexUpdated.add(conncetBlueWidget);\r\n\r\n  // ось X\r\n  chart.xAxis.setOptions('start', 0.5, 'black');\r\n  // @ts-ignore\r\n  chart.xAxis.ticks.setCustomLabels(xLabels);\r\n  chart.xAxis.display = true;\r\n  chart.xAxis.ticks.setOptions(true, 'customDateTicks', ['half month', '5m', '3m', '2m', '1m', 'only year']);\r\n  chart.xAxis.ticks.display = true;\r\n  chart.xAxis.ticks.settickDrawOptions(-6, 0.5, 'black');\r\n  chart.xAxis.ticks.label.setOptions(true, '#B2B2B2', 'bottom', 11, ['12', '\"Transcript Pro\"'])\r\n  chart.xAxis.ticks.label.isUpperCase = true;\r\n\r\n\r\n  // ось Y\r\n  chart.yAxis.setOptions('end', 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.display = true;\r\n  chart.yAxis.position = 'end';\r\n  chart.yAxis.ticks.settickDrawOptions(-50, 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.ticks.setOptions(true, 'niceCbhStep', [1, 5, 10, 15, 20, 25, 30]);\r\n  chart.yAxis.ticks.label.setOptions(true, '#B2B2B2', 'right', 0, ['12', '\"Transcript Pro\"']).setOffset(30, 10);\r\n  chart.yAxis.ticks.label.units = '%';\r\n  chart.yAxis.grid.setOptions(true, '#B2B2B2', 1, [1, 2]);\r\n\r\n\r\n  //добавляем custom ticks для Y\r\n  const zeroTick = new Ticks(chart.yAxis.type);\r\n  zeroTick.setOptions(true, 'zero');\r\n  zeroTick.settickDrawOptions(-50, 1, '#000000', [2, 1]);\r\n  zeroTick.label.display = false;\r\n  zeroTick.hasAnimation = true;\r\n  zeroTick.timeFunc = easing;\r\n  chart.yAxis.addCustomTicks(zeroTick);\r\n\r\n  const minTick = new Ticks(chart.yAxis.type);\r\n  minTick.setOptions(true, 'min');\r\n  minTick.settickDrawOptions(-50, 0.5, 'black', []);\r\n  minTick.label.display = false;\r\n  chart.yAxis.addCustomTicks(minTick);\r\n\r\n  // создаем Plots\r\n  chart.addPlot('red_line', 'line', 1, '#FF2222', []);\r\n  chart.addPlot('red_area', 'area_bottom', 0, '#FFE5E5', '#FFE5E5', 0);\r\n  chart.addPlot('blue_line', 'line', 1, '#0070FF', []);\r\n  chart.addPlot('blue_area', 'area_bottom', 0, '#D9EAFF', '#D9EAFF', 0);\r\n  chart.addPlot('zero_line', 'line', 1, '#000000', [2, 1]); //пунктирная линия 0\r\n\r\n  // создаем Tooltipы\r\n\r\n  // lines\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_vertical_full', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n\r\n  // circles\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#FF2222', 4);\r\n  chart.findPlotById('black_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', 'black', 4);\r\n\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#FF2222', 4);\r\n\r\n  // labels\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'label_x_start', 0.5, 'black', '#ebebeb', 4, xLabels).label.setOptions(true, 'black', 'bottom', 14, ['12', '\"Transcript Pro\"']);\r\n\r\n  // data\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#FF2222', '#FF2222', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#0070FF', '#0070FF', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n\r\n  // delta\r\n  chart.findPlotById('red_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n\r\n  // подготавливаем данные как на сайте CyberHedge\r\n  let serie5star = calculateDeviationsVal(cbh5, cbh5[0]);\r\n  let serie1star = calculateDeviationsVal(cbh1, cbh1[0]);\r\n\r\n  // создаем Series\r\n  chart.addSeriesRow('cyberHedge5_area', [serie5star]).setPlotsIds('blue_area');\r\n  chart.addSeriesRow('cyberHedge1_area', [serie1star]).setPlotsIds('red_area');\r\n  chart.addSeriesRow('cyberHedge5_line', [serie5star]).setPlotsIds('blue_line');\r\n  chart.addSeriesRow('cyberHedge1_line', [serie1star]).setPlotsIds('red_line');\r\n  chart.addSeriesRow('zero_line', [zeroSeries]).setPlotsIds('zero_line');\r\n\r\n\r\n  // настраиваем Min Max осей\r\n  chart.xAxis.setMinMax(chart.data.findExtremes('val'), true); //по экстремумам оси X\r\n  chart.yAxis.setMinMax(chart.data.findExtremes('ind', chart.xAxis.min, chart.xAxis.max), true); //scale to fit по Y\r\n  chart.yAxis.setMinMax([chart.yAxis.min - gapY * chart.yAxis.length, chart.yAxis.max + gapY * chart.yAxis.length], true); //добавляем по отступам как на сайте\r\n\r\n  //включаем анимацию\r\n  chart.xAxis.ticks.switchAnimation(true, 300);\r\n  chart.yAxis.ticks.switchAnimation(true, 300);\r\n  chart.switchDataAnimation(true, 300);\r\n  chart.data.changeAllSeriesAnimationTimeFunction(easing);\r\n\r\n  chart.setCanvasPaddings(25, 80, 40, 20); // задаем отступы для области отрисовки\r\n\r\n}\r\n\r\n\r\n\r\n// преобразование данных ряда из абсолютных величин в % относительно zeroPoint\r\nfunction calculateDeviationsVal(rowData: number[], zeroPoint: number) {\r\n  let chartDataVariation = [];\r\n  chartDataVariation = [];\r\n  for (let j = 0, m = rowData.length; j < m; j++) {\r\n    chartDataVariation.push(100 * (rowData[j] - zeroPoint) / zeroPoint);\r\n  }\r\n  return chartDataVariation;\r\n}\r\n\r\n\r\n\r\n// подключение слушателей к разметке как на cbh\r\n\r\n//функция вешает слушатели на панель nav - USA / EU\r\n(function prepareCsvLoadMenu() {\r\n  let zoneItems = document.querySelectorAll('.zones_colored li');\r\n\r\n  zoneItems.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      let link = item.querySelector('a');\r\n\r\n      // @ts-ignore\r\n      document.querySelector('.zones_colored li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n\r\n      const rangeSelected = document.querySelector('.ranges_сolored li.selected');\r\n\r\n      // @ts-ignore\r\n      customLoadDataFromCsv(link.href).then((data) => {\r\n        // @ts-ignore\r\n        console.log(data);\r\n\r\n        // @ts-ignore\r\n        let chartData = csvToCols(data);\r\n\r\n        console.log(chartData);\r\n\r\n        cbh1 = chartData[2].slice(1).map((el) => { return +el });\r\n        cbh5 = chartData[1].slice(1).map((el) => { return +el });\r\n        xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n        zeroSeries = cbh1.map(() => 0);\r\n\r\n        //xLabels.sort();\r\n\r\n        setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n\r\n        const max = xLabels.length - 1;\r\n        const min = 0;\r\n        reorganizeChart(cbh5, cbh1, min, max, false);\r\n        // @ts-ignore\r\n        rangeSelected.click(rangeSelected);\r\n      })\r\n\r\n    });\r\n  });\r\n\r\n}());\r\n\r\n//функция вешает слушатели на панель ranges\r\n(function prepareRangesMenu() {\r\n  let ranges = document.querySelectorAll('.ranges_сolored li');\r\n  ranges.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      // @ts-ignore\r\n      document.querySelector('.ranges_сolored li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n      const lastLb = xLabels[xLabels.length - 1];\r\n      let maxDate = lastLb,\r\n        minDate,\r\n        max = xLabels.length - 1,\r\n        min = 0;\r\n\r\n      switch (item.innerHTML) {\r\n        case '6M':\r\n          minDate = new Date(new Date(maxDate.getTime()).setMonth(maxDate.getMonth() - 6));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '1Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 1));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '2Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 2));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case 'YTD':\r\n          minDate = new Date(new Date(maxDate.getFullYear(), 0, 1).getTime()),\r\n            min = findDateInd(minDate);\r\n          break;\r\n      }\r\n\r\n      reorganizeChart(cbh5, cbh1, min, max, true);\r\n\r\n    });\r\n  })\r\n\r\n}());\r\n\r\n\r\n\r\n//настройка виджетов для отображения данных Тултипов\r\nconst redWidget = document.getElementById('cbhIdx1-val-colored');\r\nconst blueWidget = document.getElementById('cbhIdx5-val-colored');\r\n\r\nfunction conncetRedWidget(index: number) {\r\n  if (redWidget) redWidget.innerHTML = cbh1[index].toFixed(1);\r\n}\r\n\r\nfunction conncetBlueWidget(index: number) {\r\n  if (blueWidget) blueWidget.innerHTML = cbh5[index].toFixed(1);\r\n}\r\n\r\n\r\n// настройка Chart\r\n// @ts-ignore\r\nfunction reorganizeChart(cbh5, cbh1, min, max, onlyData?: boolean) {\r\n  // подготавливаем данные как на сайте CyberHedge\r\n  let serie5star = calculateDeviationsVal(cbh5, cbh5[min]);\r\n  let serie1star = calculateDeviationsVal(cbh1, cbh1[min]);\r\n\r\n  chart.data.findSeriesById('cyberHedge5_area')?.replaceSeriesData([serie5star],false);\r\n  chart.data.findSeriesById('cyberHedge1_area')?.replaceSeriesData([serie1star],false);\r\n  chart.data.findSeriesById('cyberHedge5_line')?.replaceSeriesData([serie5star],false);\r\n  chart.data.findSeriesById('cyberHedge1_line')?.replaceSeriesData([serie1star],false);\r\n  chart.data.findSeriesById('zero_line')?.replaceSeriesData([zeroSeries],false);\r\n\r\n  if (onlyData) {\r\n    // @ts-ignore\r\n    chart.xAxis.setMinMax([min, max], false);\r\n    // @ts-ignore\r\n    chart.xAxis.ticks.setCustomLabels(xLabels);\r\n    const MinMaxY = chart.data.findExtremes('ind', min, max);\r\n    const lengthY = Math.abs(MinMaxY[0] - MinMaxY[1]);\r\n    chart.yAxis.setMinMax([MinMaxY[0] - gapY * lengthY, MinMaxY[1] + gapY * lengthY], true);\r\n  }\r\n}\r\n\r\n\r\nfunction setLastUpdateDate(lastDate: Date) {\r\n  // NOTE: fill last update node\r\n  let lastUpdateNode = document.querySelector('.last-update-colored time');\r\n  // @ts-ignore\r\n  lastUpdateNode.datetime = lastDate.toISOString();\r\n  // @ts-ignore\r\n  lastUpdateNode.innerHTML = [lastDate.getDate(), lastDate.toLocaleString('en-US', { month: 'long' }), lastDate.getFullYear()].join(' ');\r\n}\r\n\r\n\r\n//поиск индекса ближайщей даты\r\nfunction findDateInd(date: Date) {\r\n  const ind = xLabels.reduce((prev, curr, i) => {\r\n    // @ts-ignore\r\n    const curDif = Math.abs(curr - date);\r\n    // @ts-ignore\r\n    const prevDif = Math.abs(xLabels[prev] - date);\r\n    if (curDif < prevDif) return i\r\n    return prev\r\n  }, 0);\r\n  return ind;\r\n}\r\n\r\n","import { Chart } from \"../classes/Chart\"\r\nimport { customLoadDataFromCsv, csvToCols } from \"../scripts/helpers\";\r\n\r\nexport let chart: Chart;\r\nlet cbh1: number[] = [];\r\nlet cbh5: number[] = [];\r\nlet xLabels: Date[] = [];\r\nlet zeroSeries: number[] = [];\r\nconst gapY: number = 0.08;\r\n\r\n// @ts-ignore\r\nexport function createChart(container, data) {\r\n  // @ts-ignore\r\n  chart = new Chart(container, [0, 900], [0, 2000]);\r\n\r\n  [xLabels, cbh5, cbh1, zeroSeries] = [...data];\r\n\r\n  setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n  chart.tooltipsDataIndexUpdated.add(conncetRedWidget);\r\n  chart.tooltipsDataIndexUpdated.add(conncetBlueWidget);\r\n\r\n  chart.setCanvasPaddings(25, 60, 40, 20); // задаем отступы для области отрисовки\r\n\r\n  // ось X\r\n  chart.xAxis.setOptions('start', 1, 'black');\r\n  chart.xAxis.ticks.display = true;\r\n  chart.xAxis.ticks.settickDrawOptions(6, 1, 'black');\r\n  chart.xAxis.ticks.label.setOptions(true, '#B2B2B2', 'bottom', 11, ['12', '\"Transcript Pro\"']);\r\n\r\n  // ось Y\r\n  chart.yAxis.setOptions('end', 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.display = true;\r\n  chart.yAxis.position = 'end';\r\n  chart.yAxis.ticks.label.setOptions(true, '#B2B2B2', 'right', 20, ['12', '\"Transcript Pro\"']);\r\n\r\n  // создаем Plots\r\n  chart.addPlot('red_line', 'line', 1, '#FF2222', []);\r\n  chart.addPlot('red_area', 'area', 0, '#FFE5E5', '#FFE5E5', 0);\r\n  chart.addPlot('blue_line', 'line', 1, '#0070FF', []);\r\n  chart.addPlot('blue_area', 'area', 0, '#D9EAFF', '#D9EAFF', 0);\r\n  chart.addPlot('black_line', 'line', 1, '#000000', []);\r\n\r\n  // создаем Tooltipы\r\n\r\n  // lines\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_vertical_full', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n\r\n  // circles\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#FF2222', 4);\r\n  chart.findPlotById('black_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', 'black', 4);\r\n\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#FF2222', 4);\r\n\r\n  // labels\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'label_x_start', 0.5, 'black', '#ebebeb', 4, xLabels).label.setOptions(true, 'black', 'bottom', 14, ['12', '\"Transcript Pro\"']);\r\n\r\n  // data\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#FF2222', '#FF2222', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#0070FF', '#0070FF', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n\r\n  // delta\r\n  chart.findPlotById('red_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n\r\n  // подготавливаем данные как на сайте CyberHedge\r\n  let dataNew = prepareDataforCbh(cbh5, cbh1, 0);\r\n  let {\r\n    serie5star,\r\n    area5starTop,\r\n    area5starBottom,\r\n    serie1star,\r\n    area1starTop,\r\n    area1starBottom\r\n  } = dataNew;\r\n\r\n  // создаем Series\r\n  chart.addSeriesRow('cyberHedge5_area', [area5starTop, area5starBottom]).setPlotsIds('blue_area');\r\n  chart.addSeriesRow('cyberHedge1_area', [area1starTop, area1starBottom]).setPlotsIds('red_area');\r\n  chart.addSeriesRow('cyberHedge5_line', [serie5star]).setPlotsIds('blue_line');\r\n  chart.addSeriesRow('cyberHedge1_line', [serie1star]).setPlotsIds('red_line');\r\n  chart.addSeriesRow('zero_line', [zeroSeries]).setPlotsIds('black_line');\r\n\r\n  //настраиваем параметры осей\r\n  chart.yAxis.ticks.setOptions(false, 'niceCbhStep', [1, 5, 10, 15, 20, 25, 30]);\r\n  chart.yAxis.ticks.label.units = '%';\r\n  // @ts-ignore\r\n  chart.xAxis.ticks.setCustomLabels(xLabels);\r\n  chart.xAxis.ticks.setOptions(true, 'customDateTicks', ['half month', '5m', '3m', '2m', '1m', 'only year']);\r\n  chart.xAxis.display = true;\r\n\r\n  // настраиваем Min Max осей\r\n\r\n  chart.xAxis.setMinMax(chart.data.findExtremes('val'), true); //по экстремумам оси X\r\n  chart.yAxis.setMinMax(chart.data.findExtremes('ind', chart.xAxis.min, chart.xAxis.max), true); //scale to fit по Y\r\n  chart.yAxis.setMinMax([chart.yAxis.min - gapY * chart.yAxis.length, chart.yAxis.max + gapY * chart.yAxis.length], true); //добавляем по отступам как на сайте\r\n\r\n  //включаем анимацию\r\n  const bezier = require('bezier-easing');\r\n  const easing = bezier(0.65, 0, 0.35, 1);\r\n\r\n  //включаем анимацию\r\n  chart.xAxis.ticks.switchAnimation(true, 300);\r\n  chart.yAxis.ticks.switchAnimation(true, 300);\r\n  chart.switchDataAnimation(true, 300);\r\n  chart.data.changeAllSeriesAnimationTimeFunction(easing);\r\n\r\n  chart.setCanvasPaddings(25, 60, 40, 20); // задаем отступы для области отрисовки\r\n\r\n}\r\n\r\n\r\n// подготоваливает данные для Chart\r\nexport function prepareDataforCbh(star5: number[], star1: number[], fromIndex: number) {\r\n  const arrLength = star5.length;\r\n  let serie5star = calculateDeviations(star5, fromIndex),\r\n    serie1star = calculateDeviations(star1, fromIndex),\r\n    area5starTop = [],\r\n    area5starBottom = [],\r\n    area1starTop = [],\r\n    area1starBottom = [];\r\n  for (let i = 0, l = arrLength; i < l; i++) {\r\n    let item5star = serie5star[i],\r\n      item1star = serie1star[i];\r\n    let elTop5 = (item5star > 0) ? ((item5star > item1star) ? item5star : item5star) : 0\r\n    area5starTop.push(elTop5);\r\n    let elBot5 = (item5star > 0) ? ((item1star > 0) ? ((item1star > item5star) ? item5star : item1star) : 0) : item5star\r\n    area5starBottom.push(elBot5);\r\n    let elTop1 = (item1star > 0) ? item1star : ((item5star > 0) ? 0 : ((item5star < item1star) ? item1star : item5star));\r\n    area1starTop.push(elTop1);\r\n    let elBot1 = (item1star > 0) ? 0 : ((item5star < item1star) ? item1star : item1star);\r\n    area1starBottom.push(elBot1);\r\n  }\r\n  return { serie5star, area5starTop, area5starBottom, serie1star, area1starTop, area1starBottom };\r\n}\r\n\r\n\r\n// перевод из абсолютных величин в %\r\nfunction calculateDeviations(rowData: number[], fromIndex: number) {\r\n  let chartDataVariation = [];\r\n  let zeroPoint = rowData[fromIndex];\r\n  chartDataVariation = [];\r\n  for (let j = 0, m = rowData.length; j < m; j++) {\r\n    chartDataVariation.push(100 * (rowData[j] - zeroPoint) / zeroPoint);\r\n  }\r\n  return chartDataVariation;\r\n}\r\n\r\n\r\n\r\n// подключение слушателей к разметке как на cbh\r\n\r\n//функция вешает слушатели на панель nav - USA / EU\r\n(function prepareCsvLoadMenu() {\r\n  let zoneItems = document.querySelectorAll('.index .zones li');\r\n\r\n  zoneItems.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      let link = item.querySelector('a');\r\n\r\n\r\n      // @ts-ignore\r\n      document.querySelector('.index .zones li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n\r\n      const rangeSelected = document.querySelector('.ranges_indices li.selected');\r\n\r\n      // @ts-ignore\r\n      customLoadDataFromCsv(link.href).then((data) => {\r\n        // @ts-ignore\r\n        let chartData = csvToCols(data);\r\n\r\n        cbh1 = chartData[2].slice(1).map((el) => { return +el });\r\n        cbh5 = chartData[1].slice(1).map((el) => { return +el });\r\n        xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n        zeroSeries = cbh1.map(() => 0);\r\n\r\n        setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n\r\n        const max = xLabels.length - 1;\r\n        const min = 0;\r\n        reorganizeChart(cbh5, cbh1, min, max, false);\r\n        // @ts-ignore\r\n        rangeSelected.click(rangeSelected);\r\n      })\r\n\r\n    });\r\n  });\r\n\r\n}());\r\n\r\n//функция вешает слушатели на панель ranges\r\n(function prepareRangesMenu() {\r\n  let ranges = document.querySelectorAll('.ranges_indices li');\r\n  ranges.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      // @ts-ignore\r\n      document.querySelector('.ranges_indices li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n      const lastLb = xLabels[xLabels.length - 1];\r\n      let maxDate = lastLb,\r\n        minDate,\r\n        max = xLabels.length - 1,\r\n        min = 0;\r\n\r\n      switch (item.innerHTML) {\r\n        case '6M':\r\n          minDate = new Date(new Date(maxDate.getTime()).setMonth(maxDate.getMonth() - 6));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '1Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 1));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '2Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 2));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case 'YTD':\r\n          minDate = new Date(new Date(maxDate.getFullYear(), 0, 1).getTime()),\r\n            min = findDateInd(minDate);\r\n          break;\r\n\r\n      }\r\n\r\n      reorganizeChart(cbh5, cbh1, min, max, true);\r\n\r\n    });\r\n  })\r\n\r\n}());\r\n\r\n\r\n\r\n//настройка виджетов для отображения данных Тултипов\r\nconst redWidget = document.getElementById('cbhIdx1-val');\r\nconst blueWidget = document.getElementById('cbhIdx5-val');\r\n\r\nfunction conncetRedWidget(index: number) {\r\n  if (redWidget) redWidget.innerHTML = cbh1[index].toFixed(1);\r\n}\r\n\r\nfunction conncetBlueWidget(index: number) {\r\n  if (blueWidget) blueWidget.innerHTML = cbh5[index].toFixed(1);\r\n}\r\n\r\n\r\n// настройка Chart\r\n// @ts-ignore\r\nfunction reorganizeChart(cbh5, cbh1, min, max, onlyData?: boolean) {\r\n  let data = prepareDataforCbh(cbh5, cbh1, min);\r\n  let {\r\n    serie5star,\r\n    area5starTop,\r\n    area5starBottom,\r\n    serie1star,\r\n    area1starTop,\r\n    area1starBottom\r\n  } = data;\r\n\r\n  chart.data.findSeriesById('cyberHedge5_area')?.replaceSeriesData([area5starTop, area5starBottom],false);\r\n  chart.data.findSeriesById('cyberHedge1_area')?.replaceSeriesData([area1starTop, area1starBottom],false);\r\n  chart.data.findSeriesById('cyberHedge5_line')?.replaceSeriesData([serie5star],false);\r\n  chart.data.findSeriesById('cyberHedge1_line')?.replaceSeriesData([serie1star],false);\r\n  chart.data.findSeriesById('zero_line')?.replaceSeriesData([zeroSeries],false);\r\n\r\n  if (onlyData) {\r\n    // @ts-ignore\r\n    chart.xAxis.ticks.setCustomLabels(xLabels);\r\n    chart.xAxis.setMinMax([min, max], false);\r\n    const MinMaxY = chart.data.findExtremes('ind', min, max);\r\n    const lengthY = Math.abs(MinMaxY[0] - MinMaxY[1]);\r\n    chart.yAxis.setMinMax([MinMaxY[0] - gapY * lengthY, MinMaxY[1] + gapY * lengthY], true);\r\n  }\r\n}\r\n\r\n\r\nfunction setLastUpdateDate(lastDate: Date) {\r\n  // NOTE: fill last update node\r\n  let lastUpdateNode = document.querySelector('.last-update time');\r\n  // @ts-ignore\r\n  lastUpdateNode.datetime = lastDate.toISOString();\r\n  // @ts-ignore\r\n  lastUpdateNode.innerHTML = [lastDate.getDate(), lastDate.toLocaleString('en-US', { month: 'long' }), lastDate.getFullYear()].join(' ');\r\n}\r\n\r\n\r\n//поиск индекса ближайщей даты\r\nfunction findDateInd(date: Date) {\r\n  const ind = xLabels.reduce((prev, curr, i) => {\r\n    // @ts-ignore\r\n    const curDif = Math.abs(curr - date);\r\n    // @ts-ignore\r\n    const prevDif = Math.abs(xLabels[prev] - date);\r\n    if (curDif < prevDif) return i\r\n    return prev\r\n  }, 0);\r\n  return ind;\r\n}\r\n\r\n","import { Point } from \"./Point\";\r\n//import { Signal } from \"signals\"\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { Label } from \"./Label\";\r\n\r\nexport class Legend {\r\n    \r\n    text: string[];\r\n    label: Label;\r\n    getCoord: (viewport: Rectangle) => Point;\r\n\r\n    constructor( text:string[], getCoord: (viewport: Rectangle) => Point ) {\r\n        this.text = text;\r\n        this.label = new Label();\r\n        this.getCoord = getCoord;\r\n\r\n        return this;\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D, vp:Rectangle) {\r\n        const coord = this.getCoord(vp);\r\n        this.text.forEach((textrow) => {\r\n            this.label.draw(ctx, coord, textrow);\r\n            coord.y = coord.y + this.label.fontSize;\r\n        })\r\n        \r\n    }\r\n\r\n\r\n}","import { Chart } from \"../classes/Chart\"\r\nimport { Legend } from '../classes/Legend';\r\nimport { Point } from '../classes/Point';\r\nimport { Rectangle } from '../classes/Rectangle';\r\nimport { Ticks } from \"../classes/Ticks\"\r\n\r\nexport let chart: Chart;\r\n\r\n// @ts-ignore\r\nexport function prepareData(data): any[] {\r\n  //разбираем CSV по рядам\r\n  let x, y, labels;\r\n  const oneX: number[] = [1.3];\r\n  const oneY: number[] = [2.5];\r\n  // @ts-ignore\r\n  x = data[0].slice(1).map((el) => { return +el });\r\n  // @ts-ignore\r\n  y = data[1].slice(1).map((el) => { return +el });\r\n  // @ts-ignore\r\n  labels = data[2].slice(1).map((el) => { return el });\r\n  return [x, y, oneX, oneY, labels];\r\n}\r\n\r\n//функция создает и настраивает Chart квадратный\r\n// @ts-ignore\r\nexport function createChart(container, data) {\r\n  // @ts-ignore\r\n  chart = new Chart(container, [0, 5], [0, 5]);\r\n\r\n  let x, y, oneX, oneY, labels;\r\n  [x, y, oneX, oneY, labels] = [...data];\r\n\r\n  // ось X\r\n  chart.xAxis.setOptions('end', 1, 'black');\r\n  chart.xAxis.ticks.setOptions(false, 'fixedCount', 5);\r\n  chart.xAxis.ticks.label.setOptions(false, '#B2B2B2', 'bottom', 11, ['12', '\"Transcript Pro\"']);\r\n  chart.xAxis.grid.setOptions(true, 'black', 0.5, []);\r\n  chart.xAxis.setName('Capital Managment', 'start').label.setOptions(true, 'black', 'top', -30, ['18', '\"Transcript Pro\"']);\r\n\r\n  //легенда для оси X\r\n  const lowRisk = new Legend(['Low', 'Risk'], function (vp: Rectangle): Point { return new Point(vp.x1 - 25, vp.y2 + 25) })\r\n  lowRisk.label.setOptions(true, 'black', 'top', 0, ['14', '\"Transcript Pro\"']);\r\n  chart.xAxis.addLegend(lowRisk);\r\n\r\n  const highRisk = new Legend(['High', 'Risk'], function (vp: Rectangle): Point { return new Point(vp.x2 + 25, vp.y1 - 25) })\r\n  highRisk.label.setOptions(true, 'black', 'top', 0, ['14', '\"Transcript Pro\"']);\r\n  chart.xAxis.addLegend(highRisk);\r\n\r\n  //добавляем custom ticks для X\r\n  const newTicks = new Ticks(chart.xAxis.type);\r\n  newTicks.setOptions(false, 'midStep', 5);\r\n  newTicks.label.setOptions(true, '#B2B2B2', 'top', 17, ['25', '\"Transcript Pro\"'], ['#60bb4c', '#accd5a', '#eed15c', '#ee9c58', '#e94f49']);\r\n  newTicks.setCustomLabels(['●'])\r\n  chart.xAxis.addCustomTicks(newTicks);\r\n\r\n  // ось Y\r\n  chart.yAxis.setOptions('end', 1, '#B2B2B2');\r\n  chart.yAxis.ticks.setOptions(false, 'fixedCount', 5);\r\n  chart.yAxis.ticks.label.setOptions(false, '#B2B2B2', 'right', 20, ['12', '\"Transcript Pro\"']);\r\n  chart.yAxis.grid.setOptions(true, 'black', 0.5, []);\r\n\r\n  chart.yAxis.setName('Vulnerability', 'start').label.setOptions(true, 'black', 'right', -10, ['18', '\"Transcript Pro\"']);\r\n  chart.yAxis.label.rotationAngle = -90;\r\n\r\n  //добавляем custom ticks для Y\r\n  const newYTicks = new Ticks(chart.yAxis.type);\r\n  newYTicks.setOptions(false, 'midStep', 5);\r\n  newYTicks.label.setOptions(true, '#B2B2B2', 'right', 30, ['25', '\"Transcript Pro\"'], ['#60bb4c', '#accd5a', '#eed15c', '#ee9c58', '#e94f49']);\r\n  newYTicks.setCustomLabels(['●'])\r\n  chart.yAxis.addCustomTicks(newYTicks);\r\n\r\n  // контур графика\r\n  chart.hasBorder = true;\r\n\r\n  // создаем Plots\r\n  chart.addPlot('uni_circles', 'unicode', 20, '#454e56', '●');\r\n  chart.addPlot('uni_triangle', 'unicode', 20, '#454e56', '▼');\r\n\r\n  //tt\r\n  chart.findPlotById('uni_circles')?.addTooltip('ttId', 'data_label', 0.5, 'black', '#ebebeb', labels).label.setOptions(true, 'black', 'top', 15, ['12', '\"Transcript Pro\"']);\r\n  //chart.findPlotById('uni_triangle')?.addTooltip('ttId', 'data_label', 0.5, 'black', '#ebebeb', labels).label.setOptions('black', 'top', 15, ['12', '\"Transcript Pro\"']);\r\n\r\n  // создаем Series\r\n  chart.addSeries('portfolio', [x, y]).setPlotsIds('uni_circles');\r\n  chart.addSeries('portfolio_1', [oneX, oneY]).setPlotsIds('uni_triangle');\r\n\r\n  //включаем анимацию\r\n  const bezier = require('bezier-easing');\r\n  const easing = bezier(0.65, 0, 0.35, 1);\r\n\r\n  chart.xAxis.ticks.switchAnimation(false, 300);\r\n  chart.yAxis.ticks.switchAnimation(false, 300);\r\n  chart.switchDataAnimation(true, 300);\r\n  chart.data.changeAllSeriesAnimationTimeFunction(easing);\r\n\r\n  //обавляем фон\r\n  chart.addBackGround('coloredGrid_cbh');\r\n\r\n  // делаем квадратное соотношение\r\n  chart.switchResolution();\r\n  // задаем отступы для области отрисовки\r\n  chart.setCanvasPaddings(60, 60, 60, 60);\r\n\r\n  // элементы управления\r\n  const randBtn = document.getElementById('rand_btn');\r\n  //@ts-ignore\r\n  randBtn.addEventListener('click', () => {\r\n    reorganizeChart();\r\n  })\r\n}\r\n\r\n\r\nexport function reorganizeChart() {\r\n  let x, y, oneX, oneY, labels;\r\n\r\n  x = [];\r\n  y = [];\r\n  labels = [];\r\n\r\n  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n  const charactersLength = characters.length;\r\n  const newLength = 1 + Math.round(Math.random() * 16);\r\n\r\n  for (let i = 0; i < newLength; i++) {\r\n    x.push(0.1 + Math.random() * 4.8);\r\n    y.push(0.1 + Math.random() * 4.8);\r\n    labels.push(characters.charAt(Math.floor(Math.random() * charactersLength)))\r\n  }\r\n\r\n  oneX = [0.1 + Math.random() * 4.8];\r\n  oneY = [0.1 + Math.random() * 4.8];\r\n\r\n  chart.data.findSeriesById('portfolio')?.replaceSeriesData([x, y], true);\r\n  chart.data.findSeriesById('portfolio_1')?.replaceSeriesData([oneX, oneY], true);\r\n  // @ts-ignore\r\n  chart.findPlotById('uni_circles')?.findTooltipById('ttId').labels = labels;\r\n}\r\n\r\n\r\n\r\n/* index.ts\r\n\r\n\r\n// @ts-ignore\r\nimport WebFont from 'webfontloader';\r\n\r\nimport { customLoadDataFromCsv, csvToCols } from \"./scripts/helpers\"\r\nimport { Chart } from \"./classes/Chart\"\r\n\r\n// выбираем config\r\nimport { prepareData, createChart, reorganizeChart } from \"./configs/square-chart\"\r\n\r\n//подгрузка CSV файла\r\nconst sqrData = require('./data/cbhVulnerability_test.csv');\r\n\r\n\r\n//объявляем переменные\r\nlet chart: Chart;\r\nconst chartContainer = document.getElementById('indexChart');\r\nconst fonts = ['Transcript Pro'];\r\n\r\n\r\n// проверка подгрузки шрифта\r\nconst WebFont = require('webfontloader')\r\n\r\nWebFont.load({\r\n  custom: {\r\n    families: fonts,\r\n  },\r\n\r\n  active: function () {\r\n\r\n    customLoadDataFromCsv(sqrData).then((data) => {\r\n      // @ts-ignore\r\n      let chartData = csvToCols(data);\r\n      //разбираем CSV по рядам\r\n      chartData = prepareData(chartData);\r\n      //создаем chart\r\n      chart = createChart(chartContainer, [...chartData]);\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n  },\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n*/","import { Chart } from \"../classes/Chart\";\r\nimport { Ticks } from \"../classes/Ticks\";\r\nimport { customLoadDataFromCsv, csvToCols } from \"../scripts/helpers\";\r\n\r\nexport let chart: Chart;\r\nlet cbh1: number[] = [];\r\nlet cbh5: number[] = [];\r\nlet xLabels: Date[] = [];\r\nlet zeroSeries: number[] = [];\r\nlet seriesLabeled: number[][];\r\nlet seriesText: string[]\r\nconst gapY: number = 0.08;\r\n\r\nconst bezier = require('bezier-easing');\r\nconst easing = bezier(0.65, 0, 0.35, 1);\r\n\r\n// @ts-ignore\r\nexport function createChart(container, data) {\r\n  // @ts-ignore\r\n  //chart = new Chart(container, [0, 900], [0, 2000]);\r\n  chart = new Chart(container, [0, 900], [0, 2000]);\r\n\r\n  [xLabels, cbh5, cbh1, zeroSeries, seriesLabeled, seriesText] = [...data];\r\n\r\n  // перевести данные в % если нужно (точка 0 = cbh5[0] и cbh1[0] соответсвенно)\r\n  //let serie5star = calculateDeviationsVal(cbh5, cbh5[0]);\r\n  //let serie1star = calculateDeviationsVal(cbh1, cbh1[0]);\r\n\r\n  // оставить исходные данные\r\n  let serie5star = cbh5;\r\n  let serie1star = cbh1;\r\n  \r\n  setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n\r\n  // ось X\r\n  chart.xAxis.setOptions('start', 0.5, 'black');\r\n  // @ts-ignore\r\n  chart.xAxis.ticks.setCustomLabels(xLabels);\r\n  chart.xAxis.display = true;\r\n  chart.xAxis.ticks.setOptions(true, 'customDateTicks', ['half month', '5m', '3m', '2m', '1m', 'only year']);\r\n  chart.xAxis.ticks.display = true;\r\n  chart.xAxis.ticks.settickDrawOptions(-6, 0.5, 'black');\r\n  chart.xAxis.ticks.label.setOptions(true, '#B2B2B2', 'bottom', 11, ['12', '\"Transcript Pro\"'])\r\n  chart.xAxis.ticks.label.isUpperCase = true;\r\n\r\n\r\n  // ось Y\r\n  chart.yAxis.setOptions('end', 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.display = true;\r\n  chart.yAxis.position = 'end';\r\n  chart.yAxis.ticks.settickDrawOptions(-50, 1, '#B2B2B2', [1, 2]);\r\n  chart.yAxis.ticks.setOptions(true, 'niceCbhStep', [1, 5, 10, 15, 20, 25, 30]);\r\n  chart.yAxis.ticks.label.setOptions(true, '#B2B2B2', 'right', 0, ['12', '\"Transcript Pro\"']).setOffset(30, 10);\r\n  chart.yAxis.ticks.label.units = '%';\r\n  chart.yAxis.grid.setOptions(true, '#B2B2B2', 1, [1, 2]);\r\n\r\n\r\n  //добавляем custom ticks для Y\r\n  const zeroTick = new Ticks(chart.yAxis.type);\r\n  zeroTick.setOptions(true, 'zero');\r\n  zeroTick.settickDrawOptions(-50, 1, '#000000', [2, 1]);\r\n  zeroTick.label.display = false;\r\n  zeroTick.hasAnimation = true;\r\n  zeroTick.timeFunc = easing;\r\n  chart.yAxis.addCustomTicks(zeroTick);\r\n\r\n  const minTick = new Ticks(chart.yAxis.type);\r\n  minTick.setOptions(true, 'min');\r\n  minTick.settickDrawOptions(-50, 0.5, 'black', []);\r\n  minTick.label.display = false;\r\n  chart.yAxis.addCustomTicks(minTick);\r\n\r\n  // создаем Plots\r\n  chart.addPlot('red_line', 'line', 1, '#FF2222', []);\r\n  chart.addPlot('red_area', 'area_bottom', 0, '#FFE5E5', '#FFE5E5', 0);\r\n  chart.addPlot('blue_line', 'line', 1, '#0070FF', []);\r\n  chart.addPlot('blue_area', 'area_bottom', 0, '#D9EAFF', '#D9EAFF', 0);\r\n  chart.addPlot('zero_line', 'line', 1, '#000000', [2, 1]); //пунктирная линия 0\r\n  chart.addPlot('labeled', 'text', 1, '#000000', '#000000') //график с лейблами\r\n    .label.setOptions(true, 'black', 'top', 10 + 15 + 10, ['18', '\"Transcript Pro\"'])\r\n    .setOutline({ width: 5, color: 'white' })\r\n\r\n  // создаем Tooltips\r\n  \r\n  // lines\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_vertical_full', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'line_horizontal_end', 1, '#B2B2B2', [1, 2]);\r\n\r\n  // circles\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', '#FF2222', 4);\r\n  chart.findPlotById('black_line')?.addTooltip('ttId', 'circle_series', 3, '#ffffff', 'black', 4);\r\n\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#0070FF', 4);\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'circle_y_end', 3, '#ffffff', '#FF2222', 4);\r\n\r\n  // labels\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'label_x_start', 0.5, 'black', '#ebebeb', 4, xLabels).label.setOptions(true, 'black', 'bottom', 14, ['12', '\"Transcript Pro\"']);\r\n\r\n  // data\r\n  chart.findPlotById('red_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#FF2222', '#FF2222', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('ttId', 'data_y_end', 0.5, '#0070FF', '#0070FF', 4).label.setOptions(true, 'white', 'right', 30, ['12', '\"Transcript Pro\"']);\r\n\r\n  // delta\r\n  chart.findPlotById('red_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n  chart.findPlotById('blue_line')?.addTooltip('delta_1', 'delta_abs', 0.5, 'black', '#ebebeb', 4).label.setOptions(true, 'black', 'right', 35, ['12', '\"Transcript Pro\"']);\r\n\r\n  // создаем Series\r\n  chart.addSeriesRow('cyberHedge5_area', [serie5star]).setPlotsIds('blue_area');\r\n  chart.addSeriesRow('cyberHedge1_area', [serie1star]).setPlotsIds('red_area');\r\n  chart.addSeriesRow('cyberHedge5_line', [serie5star]).setPlotsIds('blue_line');\r\n  chart.addSeriesRow('cyberHedge1_line', [serie1star]).setPlotsIds('red_line');\r\n  chart.addSeriesRow('zero_line', [zeroSeries]).setPlotsIds('zero_line');\r\n  \r\n  chart.addSeries('cyberHedge_labels', seriesLabeled, seriesText).setPlotsIds('labeled');\r\n\r\n  // настраиваем Min Max осей\r\n  chart.xAxis.setMinMax(chart.data.findExtremes('val'), true); //по экстремумам оси X\r\n  chart.yAxis.setMinMax(chart.data.findExtremes('ind', chart.xAxis.min, chart.xAxis.max), true); //scale to fit по Y\r\n  chart.yAxis.setMinMax([chart.yAxis.min - gapY * chart.yAxis.length, chart.yAxis.max + gapY * chart.yAxis.length], true); //добавляем по отступам как на сайте\r\n\r\n  //включаем анимацию\r\n  chart.xAxis.ticks.switchAnimation(true, 300);\r\n  chart.yAxis.ticks.switchAnimation(true, 300);\r\n  chart.switchDataAnimation(true, 300);\r\n  chart.data.changeAllSeriesAnimationTimeFunction(easing);\r\n\r\n  chart.setCanvasPaddings(25, 80, 40, 20); // задаем отступы для области отрисовки\r\n}\r\n\r\n\r\n// преобразование данных ряда из абсолютных величин в % относительно zeroPoint\r\nfunction calculateDeviationsVal(rowData: number[], zeroPoint: number) {\r\n  let chartDataVariation = [];\r\n  chartDataVariation = [];\r\n  for (let j = 0, m = rowData.length; j < m; j++) {\r\n    chartDataVariation.push(100 * (rowData[j] - zeroPoint) / zeroPoint);\r\n  }\r\n  return chartDataVariation;\r\n}\r\n\r\n// подключение слушателей к разметке как на cbh\r\n\r\n//функция вешает слушатели на панель nav - USA / EU\r\n(function prepareCsvLoadMenu() {\r\n  let zoneItems = document.querySelectorAll('.zones_article li');\r\n\r\n  zoneItems.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      let link = item.querySelector('a');\r\n\r\n      // @ts-ignore\r\n      document.querySelector('.zones_article li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n\r\n      const rangeSelected = document.querySelector('.ranges_article li.selected');\r\n\r\n      // @ts-ignore\r\n      customLoadDataFromCsv(link.href).then((data) => {\r\n        // @ts-ignore\r\n        let chartData = csvToCols(data);\r\n\r\n        cbh1 = chartData[2].slice(1).map((el) => { return +el });\r\n        cbh5 = chartData[1].slice(1).map((el) => { return +el });\r\n        xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n        zeroSeries = cbh1.map(() => 0);\r\n        cbh1 = cbh1.reverse();\r\n        cbh5 = cbh5.reverse();\r\n        xLabels = xLabels.reverse();\r\n        setLastUpdateDate(xLabels[xLabels.length - 1]);\r\n\r\n        const max = xLabels.length - 1;\r\n        const min = 0;\r\n\r\n        reorganizeChart(cbh5, cbh1, min, max, false);\r\n        // @ts-ignore\r\n        rangeSelected.click(rangeSelected);\r\n      })\r\n\r\n    });\r\n  });\r\n\r\n}());\r\n\r\n//функция вешает слушатели на панель ranges\r\n(function prepareRangesMenu() {\r\n  let ranges = document.querySelectorAll('.ranges_article li');\r\n  ranges.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      // @ts-ignore\r\n      document.querySelector('.ranges_article li.selected').classList.remove('selected');\r\n      item.classList.add('selected');\r\n      const lastLb = xLabels[xLabels.length - 1];\r\n      let maxDate = lastLb,\r\n        minDate,\r\n        max = xLabels.length - 1,\r\n        min = 0;\r\n\r\n      switch (item.innerHTML) {\r\n        case '6M':\r\n          minDate = new Date(new Date(maxDate.getTime()).setMonth(maxDate.getMonth() - 6));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '1Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 1));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case '2Y':\r\n          minDate = new Date(new Date(maxDate.getTime()).setFullYear(maxDate.getFullYear() - 2));\r\n          min = findDateInd(minDate);\r\n          break;\r\n\r\n        case 'YTD':\r\n          minDate = new Date(new Date(maxDate.getFullYear(), 0, 1).getTime()),\r\n            min = findDateInd(minDate);\r\n          break;\r\n      }\r\n\r\n      reorganizeChart(cbh5, cbh1, min, max, true);\r\n\r\n    });\r\n  })\r\n\r\n}());\r\n\r\n\r\n// настройка Chart\r\n// @ts-ignore\r\nfunction reorganizeChart(cbh5, cbh1, min, max, onlyData?: boolean) {\r\n  \r\n  // перевести данные в % если нужно (точка 0 = cbh5[0] и cbh1[0] соответсвенно)\r\n  // let serie5star = calculateDeviationsVal(cbh5, cbh5[min]);\r\n  // let serie1star = calculateDeviationsVal(cbh1, cbh1[min]);\r\n\r\n  // оставить исходные данные\r\n  let serie5star = cbh5;\r\n  let serie1star = cbh1;\r\n\r\n  chart.data.findSeriesById('cyberHedge5_area')?.replaceSeriesData([serie5star], false);\r\n  chart.data.findSeriesById('cyberHedge1_area')?.replaceSeriesData([serie1star], false);\r\n  chart.data.findSeriesById('cyberHedge5_line')?.replaceSeriesData([serie5star], false);\r\n  chart.data.findSeriesById('cyberHedge1_line')?.replaceSeriesData([serie1star], false);\r\n  chart.data.findSeriesById('zero_line')?.replaceSeriesData([zeroSeries], false);\r\n\r\n  if (onlyData) {\r\n    // @ts-ignore\r\n    chart.xAxis.setMinMax([min, max], false);\r\n    // @ts-ignore\r\n    chart.xAxis.ticks.setCustomLabels(xLabels);\r\n    const MinMaxY = chart.data.findExtremes('ind', min, max);\r\n    const lengthY = Math.abs(MinMaxY[0] - MinMaxY[1]);\r\n    chart.yAxis.setMinMax([MinMaxY[0] - gapY * lengthY, MinMaxY[1] + gapY * lengthY], true);\r\n  }\r\n}\r\n\r\n\r\nfunction setLastUpdateDate(lastDate: Date) {\r\n  // NOTE: fill last update node\r\n  let lastUpdateNode = document.querySelector('.last-update-article time');\r\n  // @ts-ignore\r\n  lastUpdateNode.datetime = lastDate.toISOString();\r\n  // @ts-ignore\r\n  lastUpdateNode.innerHTML = [lastDate.getDate(), lastDate.toLocaleString('en-US', { month: 'long' }), lastDate.getFullYear()].join(' ');\r\n}\r\n\r\n\r\n//поиск индекса ближайщей даты\r\nfunction findDateInd(date: Date) {\r\n  const ind = xLabels.reduce((prev, curr, i) => {\r\n    // @ts-ignore\r\n    const curDif = Math.abs(curr - date);\r\n    // @ts-ignore\r\n    const prevDif = Math.abs(xLabels[prev] - date);\r\n    if (curDif < prevDif) return i\r\n    return prev\r\n  }, 0);\r\n  return ind;\r\n}\r\n\r\n","// browserify ./src/index.ts -p [ tsify --noImplicitAny ] > chart-bundle.js\r\n\r\n// @ts-ignore\r\n\r\n// @ts-ignore\r\nimport WebFont from 'webfontloader';\r\n\r\n// helpers\r\nimport { customLoadDataFromCsv, csvToCols } from \"./scripts/helpers\"\r\n\r\n// config cbh-indicies-black\r\nimport { createChart as createChart_ind_black } from \"./configs/indices-chart-black\";\r\n\r\n// config cbh-indicies-colored\r\nimport { createChart as createChart_ind_colored } from \"./configs/indices-chart-colored\";\r\n\r\n// config cbh-indicies\r\nimport { createChart as createChart_ind } from \"./configs/indices-chart\";\r\n\r\n// config square-chart\r\nimport { createChart as createChartSQR } from \"./configs/square-chart\"\r\nimport { prepareData } from \"./configs/square-chart\"\r\n\r\n// config indicies-article1\r\nimport { createChart as createChart_article } from \"./configs/indices-article\";\r\n\r\n//пути до CSV файлов\r\nconst sqrData = './src/data/cbhVulnerability_test.csv';\r\nconst EU = './src/data/cbhPlotData_EU.csv';\r\nconst EU_Labels = './src/data/cbhPlotData_EU_labeled.csv';\r\nconst startCSVurl = './src/data/cbhPlotData_US.csv';\r\nconst article1 = './src/data/article1.csv';\r\nconst article1_labels = './src/data/article1_labels.csv';\r\n\r\n\r\n// проверка подгрузки шрифта\r\nWebFont.load({\r\n  custom: {\r\n    families: ['Transcript Pro']\r\n  },\r\n\r\n  active: function () {\r\n\r\n    // график по серии Article1\r\n    customLoadDataFromCsv(article1).then((data) => {\r\n      customLoadDataFromCsv(article1_labels).then((dataLables) => {\r\n      const chartContainer = document.getElementById('indexChart_4');\r\n      // @ts-ignore\r\n      let chartData = csvToCols(data);\r\n      let cbh1 = chartData[2].slice(1).map((el) => { return +el }).reverse();\r\n      let cbh5 = chartData[1].slice(1).map((el) => { return +el }).reverse();\r\n      let xLabels = chartData[0].slice(1).map((el) => { return new Date(el) }).reverse();\r\n      let zeroSeries = cbh1.map(() => 0);\r\n\r\n      // @ts-ignore\r\n      let chartLables = csvToCols(dataLables);\r\n      let x = chartLables[0].slice(1).map((el) => { return +el });\r\n      let y = chartLables[1].slice(1).map((el) => { return +el });\r\n      let texts = chartLables[2].slice(1).map((el) => { return el });\r\n\r\n      \r\n\r\n      // вызов функции создания графика из конфига .src/configs/indices-chart-colored.ts\r\n      createChart_article(chartContainer, [xLabels, cbh5, cbh1, zeroSeries, [x,y], texts]);\r\n\r\n      })\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n    // черно-белый график\r\n    customLoadDataFromCsv(EU).then((data) => { //загружаем первый CSV с данными для серии\r\n\r\n      customLoadDataFromCsv(EU_Labels).then((dataLables) => { // загружаем второй CSV с данными для серии с подписями\r\n        const chartContainer = document.getElementById('indexChart_0');\r\n        // @ts-ignore\r\n        let chartData = csvToCols(data);\r\n        let cbh = chartData[1].slice(1).map((el) => { return +el });\r\n        let xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n        let zeroSeries = cbh.map(() => 0);\r\n\r\n        // @ts-ignore\r\n        let chartLables = csvToCols(dataLables);\r\n        let x = chartLables[0].slice(1).map((el) => { return +el });\r\n        let y = chartLables[1].slice(1).map((el) => { return +el });\r\n        let texts = chartLables[2].slice(1).map((el) => { return el });\r\n\r\n        createChart_ind_black(chartContainer, [xLabels, cbh, zeroSeries, [x, y], texts]); //кастомная функция создания и настройки объекта Chart\r\n\r\n      })\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n\r\n    // цветной график CBH-indices-colored\r\n    customLoadDataFromCsv(startCSVurl).then((data) => {\r\n      const chartContainer = document.getElementById('indexChart_1');\r\n      // @ts-ignore\r\n      let chartData = csvToCols(data);\r\n      let cbh1 = chartData[2].slice(1).map((el) => { return +el });\r\n      let cbh5 = chartData[1].slice(1).map((el) => { return +el });\r\n      let xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n      let zeroSeries = cbh1.map(() => 0);\r\n\r\n      // вызов функции создания графика из конфига .src/configs/indices-chart-colored.ts\r\n      createChart_ind_colored(chartContainer, [xLabels, cbh5, cbh1, zeroSeries]);\r\n\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n\r\n    // старый график CBH-indices\r\n    customLoadDataFromCsv(startCSVurl).then((data) => {\r\n      const chartContainer = document.getElementById('indexChart_2');\r\n      // @ts-ignore\r\n      let chartData = csvToCols(data);\r\n      let cbh1 = chartData[2].slice(1).map((el) => { return +el });\r\n      let cbh5 = chartData[1].slice(1).map((el) => { return +el });\r\n      let xLabels = chartData[0].slice(1).map((el) => { return new Date(el) });\r\n      let zeroSeries = cbh1.map(() => 0);\r\n\r\n      createChart_ind(chartContainer, [xLabels, cbh5, cbh1, zeroSeries]);\r\n\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n\r\n    // квадратный график\r\n    customLoadDataFromCsv(sqrData).then((data) => {\r\n      const chartContainer = document.getElementById('indexChart_3');\r\n      // @ts-ignore\r\n      let chartData = csvToCols(data);\r\n      //разбираем CSV по рядам\r\n      chartData = prepareData(chartData);\r\n      //создаем chart\r\n      createChartSQR(chartContainer, [...chartData]);\r\n    })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n\r\n\r\n  },\r\n});\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}